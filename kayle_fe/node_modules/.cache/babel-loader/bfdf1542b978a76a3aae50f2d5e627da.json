{"remainingRequest":"/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js!/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shenxh/Desktop/qa_auto_test/src/components/testplan/historyplan.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shenxh/Desktop/qa_auto_test/src/components/testplan/historyplan.vue","mtime":1611912960092},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJhbnQtZGVzaWduLXZ1ZS9lcy9tb2RhbC9zdHlsZSI7CmltcG9ydCBfTW9kYWwgZnJvbSAiYW50LWRlc2lnbi12dWUvZXMvbW9kYWwiOwppbXBvcnQgImFudC1kZXNpZ24tdnVlL2VzL21lc3NhZ2Uvc3R5bGUiOwppbXBvcnQgX21lc3NhZ2UgZnJvbSAiYW50LWRlc2lnbi12dWUvZXMvbWVzc2FnZSI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1VzZXJzL3NoZW54aC9EZXNrdG9wL3FhX2F1dG9fdGVzdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QiOwppbXBvcnQgaWNvbmZvbnQgZnJvbSAiQC9jb21wb25lbnRzL21vZHVsZWxpc3QvaWNvbmZvbnQiOwppbXBvcnQgZWFjaGhpc3RvcnlwbGFuIGZyb20gIkAvY29tcG9uZW50cy90ZXN0cGxhbi9lYWNoaGlzdG9yeXBsYW4iOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBsb2FkaW5nTW9yZTogZmFsc2UsCiAgICAgIHNob3dMb2FkaW5nTW9yZTogdHJ1ZSwKICAgICAgZGF0YTogW10sCiAgICAgIGJhc2VVcmw6ICIvYXBpL3BsYW4vaGlzdG9yeXBsYW4/cGFnZWlkPSIsCiAgICAgIHBhZ2VJbmRleDogMSwKICAgICAgc2hvd1BsYW5MaXN0OiB0cnVlLAogICAgICBzaG93RWFjaFBsYW46IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0UGxhbkRhdGEoKTsKICB9LAogIHdhdGNoOiB7fSwKICBjb21wb25lbnRzOiB7CiAgICBpY29uZm9udDogaWNvbmZvbnQsCiAgICBlYWNoaGlzdG9yeXBsYW46IGVhY2hoaXN0b3J5cGxhbgogIH0sCiAgbWV0aG9kczogewogICAgZ2V0UGxhbkRhdGE6IGZ1bmN0aW9uIGdldFBsYW5EYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5sb2FkaW5nTW9yZSA9IHRydWU7CiAgICAgIHZhciB0b3RhbF9yZXEgPSB0aGlzLmJhc2VVcmwgKyB0aGlzLnBhZ2VJbmRleDsKICAgICAgcmVxdWVzdCh7CiAgICAgICAgdXJsOiB0b3RhbF9yZXEsCiAgICAgICAgbWV0aG9kOiAiR0VUIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMzQwMDAwKSB7CiAgICAgICAgICBfdGhpcy5kYXRhID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShfdGhpcy5kYXRhKSwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhLmRhdGEuZGF0YSkpOwogICAgICAgICAgY29uc29sZS5sb2coX3RoaXMuZGF0YSk7CgogICAgICAgICAgaWYgKF90aGlzLnBhZ2VJbmRleCA+PSByZXMuZGF0YS5kYXRhLnRvdG9sUGFnZSkgewogICAgICAgICAgICBfdGhpcy5zaG93TG9hZGluZ01vcmUgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgX21lc3NhZ2Uud2FybmluZyhyZXMuZGF0YS5tc2cpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMucGFnZUluZGV4ICs9IDE7CiAgICAgICAgX3RoaXMubG9hZGluZ01vcmUgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgcGxhbkRldGFpbENvbnRlbnQ6IGZ1bmN0aW9uIHBsYW5EZXRhaWxDb250ZW50KHJlY29yZCkgewogICAgICByZXR1cm4gIuaOpeWPo+imhueblueOh++8miIgKyByZWNvcmQuY29yZVJhdGUgKyAi77yb6K6h5YiS5Yib5bu65Lq677yaIiArIHJlY29yZC5wbGFuVXNlcjsgLy8gICByZXR1cm4gIuW8gOWni+aXtumXtO+8miIgKyByZWNvcmQucGxhblN0YXJ0ICsgIu+8m+e7k+adn+aXtumXtO+8miIrIHJlY29yZC5wbGFuRW5kICsgIu+8m+imhueblueOh++8miIgKyByZWNvcmQuY29yZVJhdGU7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlT2s6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZU9rKHJlY29yZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHJlY29yZCk7CiAgICAgIHJlcXVlc3QoewogICAgICAgIHVybDogIi9hcGkvcGxhbi9kZWxldGVoaXN0b3J5cGxhbiIsCiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgaWQ6IHJlY29yZC5pZAogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDM1MDAwMCkgewogICAgICAgICAgX21lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tc2cpOwogICAgICAgICAgLyoqCiAgICAgICAgICAgKiDliKDpmaTmiJDlip/lkI7vvIzlsIbmlbDmja7ph43nva4KICAgICAgICAgICAqLwoKCiAgICAgICAgICBfdGhpczIucGFnZUluZGV4ID0gMTsKICAgICAgICAgIF90aGlzMi5kYXRhID0gW107CiAgICAgICAgICBfdGhpczIuc2hvd0xvYWRpbmdNb3JlID0gdHJ1ZTsKCiAgICAgICAgICBfdGhpczIuZ2V0UGxhbkRhdGEoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX21lc3NhZ2Uud2FybmluZyhyZXMuZGF0YS5tc2cpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2hvd0RlbGV0ZUNvbmZpcm06IGZ1bmN0aW9uIHNob3dEZWxldGVDb25maXJtKHJlY29yZCkgewogICAgICB0aGlzLnNlbGVjdENvcmVEYXRhID0gcmVjb3JkOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CgogICAgICBfTW9kYWwuY29uZmlybSh7CiAgICAgICAgdGl0bGU6ICLnoa7orqTopoHliKDpmaTmraTmjqXlj6PkuYjvvJ8o5Yig6Zmk5LmL5ZCO5LiN5Y+v5oGi5aSNKSIsCiAgICAgICAgY29udGVudDogIueJiOacrDogIiArIHJlY29yZC5jbGllbnRWZXJzaW9uICsgIjsg5Yib5bu65Lq6OiAiICsgcmVjb3JkLnBsYW5Vc2VyLAogICAgICAgIG9rVGV4dDogIuehruiupCIsCiAgICAgICAgb2tUeXBlOiAiZGFuZ2VyIiwKICAgICAgICBjYW5jZWxUZXh0OiAi5Y+W5raIIiwKICAgICAgICBvbk9rOiBmdW5jdGlvbiBvbk9rKCkgewogICAgICAgICAgdGhhdC5oYW5kbGVEZWxldGVPayhyZWNvcmQpOwogICAgICAgIH0sCiAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uIG9uQ2FuY2VsKCkgewogICAgICAgICAgY29uc29sZS5sb2coIkNhbmNlbCIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2xpY2tQbGFuRGV0YWlsOiBmdW5jdGlvbiBjbGlja1BsYW5EZXRhaWwocmVjb3JkKSB7CiAgICAgIGNvbnNvbGUubG9nKHJlY29yZC5pZCk7CiAgICAgIHRoaXMuJHJlZnMuZWFjaGhpc3RvcnlwbGFuLmdldFBsYW5JZChyZWNvcmQpOwogICAgICB0aGlzLnNob3dQbGFuTGlzdCA9IGZhbHNlOwogICAgICB0aGlzLnNob3dFYWNoUGxhbiA9IHRydWU7CiAgICB9LAogICAgcmVTaG93UGxhbkxpc3Q6IGZ1bmN0aW9uIHJlU2hvd1BsYW5MaXN0KCkgewogICAgICB0aGlzLnNob3dFYWNoUGxhbiA9IGZhbHNlOwogICAgICB0aGlzLnNob3dQbGFuTGlzdCA9IHRydWU7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["historyplan.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div v-show=\"showPlanList\">\n      <a-page-header\n        title=\"历史计划\"\n        @back=\"() => this.$emit('closeHistory')\"\n      />\n      <a-list\n        class=\"demo-loadmore-list\"\n        :loading=\"loading\"\n        item-layout=\"horizontal\"\n        :data-source=\"data\"\n      >\n        <div\n          v-if=\"showLoadingMore\"\n          slot=\"loadMore\"\n          :style=\"{\n            textAlign: 'center',\n            marginTop: '12px',\n            height: '32px',\n            lineHeight: '32px'\n          }\"\n        >\n          <a-spin v-if=\"loadingMore\" />\n          <a-button v-else @click=\"getPlanData()\">\n            loading more\n          </a-button>\n        </div>\n        <a-list-item slot=\"renderItem\" slot-scope=\"item\">\n          <a slot=\"actions\" @click=\"clickPlanDetail(item)\">查看详情</a>\n          <a slot=\"actions\" @click=\"showDeleteConfirm(item)\">删除计划</a>\n          <a-list-item-meta :description=\"planDetailContent(item)\">\n            <a slot=\"title\" href=\"https://www.antdv.com/\"\n              >版本: {{ item.clientVersion }}</a\n            >\n            <iconfont\n              style=\"font-size:30px\"\n              slot=\"avatar\"\n              iconType=\"icon-plan1\"\n            ></iconfont>\n          </a-list-item-meta>\n          <!-- <div>创建人: {{ item.planUser }}</div> -->\n        </a-list-item>\n      </a-list>\n    </div>\n\n    <eachhistoryplan\n      v-show=\"showEachPlan\"\n      ref=\"eachhistoryplan\"\n      @closeHistoryDetail=\"reShowPlanList\"\n    ></eachhistoryplan>\n  </div>\n</template>\n<script>\nimport request from \"@/utils/request\";\nimport { message, Modal } from \"ant-design-vue\";\nimport iconfont from \"@/components/modulelist/iconfont\";\nimport eachhistoryplan from \"@/components/testplan/eachhistoryplan\";\n\nexport default {\n  data() {\n    return {\n      loading: false,\n      loadingMore: false,\n      showLoadingMore: true,\n      data: [],\n      baseUrl: \"/api/plan/historyplan?pageid=\",\n      pageIndex: 1,\n      showPlanList: true,\n      showEachPlan: false\n    };\n  },\n  created() {\n    this.getPlanData();\n  },\n  watch: {},\n  components: {\n    iconfont,\n    eachhistoryplan\n  },\n  methods: {\n    getPlanData() {\n      this.loadingMore = true;\n      const total_req = this.baseUrl + this.pageIndex;\n      request({\n        url: total_req,\n        method: \"GET\"\n      }).then(res => {\n        if (res.data.code === 340000) {\n          this.data = [...this.data, ...res.data.data.data];\n          console.log(this.data);\n          if (this.pageIndex >= res.data.data.totolPage) {\n            this.showLoadingMore = false;\n          }\n        } else {\n          message.warning(res.data.msg);\n        }\n        this.pageIndex += 1;\n        this.loadingMore = false;\n      });\n    },\n\n    planDetailContent(record) {\n      return (\n        \"接口覆盖率：\" + record.coreRate + \"；计划创建人：\" + record.planUser\n      );\n      //   return \"开始时间：\" + record.planStart + \"；结束时间：\"+ record.planEnd + \"；覆盖率：\" + record.coreRate;\n    },\n\n    handleDeleteOk(record) {\n      console.log(record);\n      request({\n        url: \"/api/plan/deletehistoryplan\",\n        method: \"POST\",\n        data: { id: record.id }\n      }).then(res => {\n        if (res.data.code === 350000) {\n          message.success(res.data.msg);\n          /**\n           * 删除成功后，将数据重置\n           */\n          this.pageIndex = 1;\n          this.data = [];\n          this.showLoadingMore = true;\n          this.getPlanData();\n        } else {\n          message.warning(res.data.msg);\n        }\n      });\n    },\n    showDeleteConfirm(record) {\n      this.selectCoreData = record;\n      const that = this;\n      Modal.confirm({\n        title: \"确认要删除此接口么？(删除之后不可恢复)\",\n        content:\n          \"版本: \" + record.clientVersion + \"; 创建人: \" + record.planUser,\n        okText: \"确认\",\n        okType: \"danger\",\n        cancelText: \"取消\",\n        onOk() {\n          that.handleDeleteOk(record);\n        },\n        onCancel() {\n          console.log(\"Cancel\");\n        }\n      });\n    },\n    clickPlanDetail(record) {\n      console.log(record.id);\n      this.$refs.eachhistoryplan.getPlanId(record);\n      this.showPlanList = false;\n      this.showEachPlan = true;\n    },\n    reShowPlanList() {\n      this.showEachPlan = false;\n      this.showPlanList = true;\n    }\n  }\n};\n</script>\n<style>\n.demo-loadmore-list {\n  min-height: 350px;\n}\n</style>\n"],"sourceRoot":"src/components/testplan"}]}