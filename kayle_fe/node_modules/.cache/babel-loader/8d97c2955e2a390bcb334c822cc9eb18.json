{"remainingRequest":"/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js!/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shenxh/Desktop/qa_auto_test/src/components/modulelist/createmitm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shenxh/Desktop/qa_auto_test/src/components/modulelist/createmitm.vue","mtime":1612772235218},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImFudC1kZXNpZ24tdnVlL2VzL21lc3NhZ2Uvc3R5bGUiOwppbXBvcnQgX21lc3NhZ2UgZnJvbSAiYW50LWRlc2lnbi12dWUvZXMvbWVzc2FnZSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9zaGVueGgvRGVza3RvcC9xYV9hdXRvX3Rlc3Qvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QiOwppbXBvcnQgeyBsaW1pdEhvc3RMaXN0IH0gZnJvbSAiQC91dGlscy9jb21tb25jb25maWciOwpjb25zb2xlLmxvZygiY3JlYXRlbWl0bSIpOwpjb25zb2xlLmxvZyhsaW1pdEhvc3RMaXN0KTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtSXRlbUxheW91dDogewogICAgICAgIGxhYmVsQ29sOiB7CiAgICAgICAgICB4czogewogICAgICAgICAgICBzcGFuOiAyNAogICAgICAgICAgfSwKICAgICAgICAgIHNtOiB7CiAgICAgICAgICAgIHNwYW46IDgKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHdyYXBwZXJDb2w6IHsKICAgICAgICAgIHhzOiB7CiAgICAgICAgICAgIHNwYW46IDI0CiAgICAgICAgICB9LAogICAgICAgICAgc206IHsKICAgICAgICAgICAgc3BhbjogMTYKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNvbmZpZzogewogICAgICAgIHJ1bGVzOiBbewogICAgICAgICAgdHlwZTogIm9iamVjdCIsCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fpgInmi6nkuIDkuKrku6PnkIbmnInmlYjml7bpl7QiCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgc2hvd1NwaW46IGZhbHNlLAogICAgICBsaW1pdEhvc3RMaXN0OiBsaW1pdEhvc3RMaXN0CiAgICB9OwogIH0sCiAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICB0aGlzLmZvcm0gPSB0aGlzLiRmb3JtLmNyZWF0ZUZvcm0odGhpcywgewogICAgICBuYW1lOiAidGltZV9yZWxhdGVkX2NvbnRyb2xzIgogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuZm9ybS52YWxpZGF0ZUZpZWxkcyhmdW5jdGlvbiAoZXJyLCBmaWVsZHNWYWx1ZSkgewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF90aGlzLnNob3dTcGluID0gdHJ1ZTsKCiAgICAgICAgdmFyIHZhbHVlcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZmllbGRzVmFsdWUpLCB7fSwgewogICAgICAgICAgaG9zdF9saXN0OiBmaWVsZHNWYWx1ZVsic2VsZWN0LW11bHRpcGxlIl0udG9TdHJpbmcoKSwKICAgICAgICAgIHBvcnQ6IGZpZWxkc1ZhbHVlWyJpbnB1dC1wb3J0Il0sCiAgICAgICAgICBleHBpcmVfdGltZTogZmllbGRzVmFsdWVbImRhdGUtdGltZS1waWNrZXIiXS5mb3JtYXQoIllZWVktTU0tREQgSEg6bW06c3MiKQogICAgICAgIH0pOwoKICAgICAgICBjb25zb2xlLmxvZyhmaWVsZHNWYWx1ZVsiZGF0ZS10aW1lLXBpY2tlciJdKTsKICAgICAgICBjb25zb2xlLmxvZygiUmVjZWl2ZWQgdmFsdWVzIG9mIGZvcm06ICIsIHZhbHVlcyk7CiAgICAgICAgcmVxdWVzdCh7CiAgICAgICAgICB1cmw6ICIvYXBpL3RlbXBpbnRlci9jcmVhdGVtaXRtIiwKICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgZGF0YTogdmFsdWVzCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjEwMDAyKSB7CiAgICAgICAgICAgIF9tZXNzYWdlLnN1Y2Nlc3MocmVzLmRhdGEubXNnKTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjEwMDAzKSB7CiAgICAgICAgICAgIF9tZXNzYWdlLndhcm5pbmcocmVzLmRhdGEubXNnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF9tZXNzYWdlLmVycm9yKCLmnKrnn6XplJnor6/vvIzmnI3liqHnq6/lj5HnlJ/lvILluLgiKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goewogICAgICAgICAgICB0eXBlOiAiZ2V0VXNlck1pdG1wcm94eSIKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygi6LWw6L+Z6YeM5LmIIik7CiAgICAgICAgICAgIF90aGlzLnNob3dTcGluID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpcy4kZW1pdCgiY3JlYXRlLWV2ZW50IiwgcmVzLmRhdGEuZGF0YSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgY29uc29sZS5sb2coIui1sOeahOi/memHjO+8n++8n++8nyIpOwogICAgICBjb25zb2xlLmxvZyhlKTsKICAgIH0sCiAgICBjbGlja1RvSW5zdHJ1Y3Rpb246IGZ1bmN0aW9uIGNsaWNrVG9JbnN0cnVjdGlvbigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9pbnRlcmZhY2UvaW5zdHJ1Y3Rpb24iKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["createmitm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <a-spin :spinning=\"showSpin\">\n    <div class=\"total-rouad\">\n      <a-form\n        v-bind=\"formItemLayout\"\n        :form=\"form\"\n        @submit=\"handleSubmit\"\n        style=\"width:calc(60%);float:left;\"\n      >\n        <a-form-item class=\"label-select\">\n          <H4>创建mitmproxy代理</H4>\n        </a-form-item>\n        <a-form-item label=\"代理Port\" class=\"host-select\">\n          <a-input\n            placeholder=\"输入创建代理端口号，如8808\"\n            allow-clear\n            @change=\"onChange\"\n            v-decorator=\"[\n              'input-port',\n              {\n                rules: [\n                  {\n                    required: true,\n                    message: '请输入要创建mitmproxy的端口号',\n                    type: 'string'\n                  }\n                ]\n              }\n            ]\"\n          />\n        </a-form-item>\n\n        <a-form-item label=\"筛选host\" class=\"host-select\">\n          <a-select\n            v-decorator=\"[\n              'select-multiple',\n              {\n                rules: [\n                  {\n                    required: true,\n                    message: '请选择接口所属业务线',\n                    type: 'array'\n                  }\n                ]\n              }\n            ]\"\n            mode=\"multiple\"\n            placeholder=\"请选择要筛选的host\"\n          >\n            <a-select-option\n              v-for=\"(item, index) in limitHostList\"\n              :key=\"index\"\n              :value=\"item\"\n            >\n              {{ item }}\n            </a-select-option>\n          </a-select>\n        </a-form-item>\n        <a-form-item label=\"代理时间\" class=\"host-select\">\n          <a-date-picker\n            v-decorator=\"['date-time-picker', config]\"\n            show-time\n            format=\"YYYY-MM-DD HH:mm:ss\"\n          />\n        </a-form-item>\n        <a-form-item\n          :wrapper-col=\"{\n            xs: { span: 24, offset: 0 },\n            sm: { span: 16, offset: 8 }\n          }\"\n          class=\"host-select\"\n        >\n          <a-button type=\"primary\" html-type=\"submit\">\n            创建\n          </a-button>\n        </a-form-item>\n      </a-form>\n      <div style=\"width:calc(40%);float:left;\">\n        <a-card title=\"创建说明\" style=\"width: 300px\">\n          <a slot=\"extra\" @click=\"clickToInstruction()\">更多</a>\n          <p>1、使用mitmproxy需要先创建一个属于自己的端口号来监听流量</p>\n          <p>2、目前支持筛选指定host的流量，如api.zhihu.com</p>\n          <p>\n            3、使用代理结束后，可以主动销毁mitmproxy，系统也会根据有效时间定时销毁\n          </p>\n        </a-card>\n      </div>\n    </div>\n  </a-spin>\n</template>\n<script>\nimport { message } from \"ant-design-vue\";\nimport request from \"@/utils/request\";\nimport { limitHostList } from \"@/utils/commonconfig\";\n\nconsole.log(\"createmitm\");\nconsole.log(limitHostList);\n\nexport default {\n  data() {\n    return {\n      formItemLayout: {\n        labelCol: {\n          xs: { span: 24 },\n          sm: { span: 8 }\n        },\n        wrapperCol: {\n          xs: { span: 24 },\n          sm: { span: 16 }\n        }\n      },\n      config: {\n        rules: [\n          { type: \"object\", required: true, message: \"请选择一个代理有效时间\" }\n        ]\n      },\n      showSpin: false,\n      limitHostList: limitHostList\n    };\n  },\n  beforeCreate() {\n    this.form = this.$form.createForm(this, { name: \"time_related_controls\" });\n  },\n  methods: {\n    handleSubmit(e) {\n      e.preventDefault();\n      this.form.validateFields((err, fieldsValue) => {\n        if (err) {\n          return;\n        }\n        this.showSpin = true;\n        const values = {\n          ...fieldsValue,\n          host_list: fieldsValue[\"select-multiple\"].toString(),\n          port: fieldsValue[\"input-port\"],\n          expire_time: fieldsValue[\"date-time-picker\"].format(\n            \"YYYY-MM-DD HH:mm:ss\"\n          )\n        };\n        console.log(fieldsValue[\"date-time-picker\"]);\n        console.log(\"Received values of form: \", values);\n        request({\n          url: \"/api/tempinter/createmitm\",\n          method: \"POST\",\n          data: values\n        }).then(res => {\n          if (res.data.code === 210002) {\n            message.success(res.data.msg);\n          } else if (res.data.code === 210003) {\n            message.warning(res.data.msg);\n          } else {\n            message.error(\"未知错误，服务端发生异常\");\n          }\n          this.$store.dispatch({ type: \"getUserMitmproxy\" }).then(() => {\n            console.log(\"走这里么\");\n            this.showSpin = false;\n            this.$emit(\"create-event\", res.data.data);\n          });\n        });\n      });\n    },\n    onChange(e) {\n      console.log(\"走的这里？？？\");\n      console.log(e);\n    },\n    clickToInstruction() {\n      this.$router.push(\"/interface/instruction\");\n    }\n  }\n};\n</script>\n\n<style scoped>\n@media (min-width: 900px) {\n  .host-select {\n    width: calc(60%);\n  }\n  .label-select {\n    margin-left: calc(10%);\n  }\n}\n\n@media (max-width: 900px) {\n  .host-select {\n    width: calc(70%);\n  }\n}\n\n.total-rouad {\n  display: inline;\n}\n\n.example {\n  text-align: center;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding: 30px 50px;\n  margin: 20px 0;\n}\n</style>\n"],"sourceRoot":"src/components/modulelist"}]}