{"remainingRequest":"/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js!/Users/shenxh/Desktop/qa_auto_test/node_modules/eslint-loader/index.js??ref--13-0!/Users/shenxh/Desktop/qa_auto_test/src/store/modules/auth.js","dependencies":[{"path":"/Users/shenxh/Desktop/qa_auto_test/src/store/modules/auth.js","mtime":1612505293640},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJhbnQtZGVzaWduLXZ1ZS9lcy9ub3RpZmljYXRpb24vc3R5bGUiOwppbXBvcnQgX25vdGlmaWNhdGlvbiBmcm9tICJhbnQtZGVzaWduLXZ1ZS9lcy9ub3RpZmljYXRpb24iOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvc2hlbnhoL0Rlc2t0b3AvcWFfYXV0b190ZXN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3NoZW54aC9EZXNrdG9wL3FhX2F1dG9fdGVzdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vLi4vcm91dGVyIjsKaW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKdmFyIGF1dGggPSB7CiAgc3RhdGU6IGZ1bmN0aW9uIHN0YXRlKCkgewogICAgcmV0dXJuIEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXV0aCIpKSB8fCB7CiAgICAgIHVzZXJJZDogInRlc3QiLAogICAgICB1c2VyTmFtZTogIiIsCiAgICAgIG5pY2tOYW1lOiAiIiwKICAgICAgdXNlckljb246ICIiLAogICAgICB1c2VyTWVzc2FnZTogIiIKICAgIH07CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNhdmVVc2VyTWVzc2FnZTogZnVuY3Rpb24gc2F2ZVVzZXJNZXNzYWdlKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImF1dGgiLCBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSk7CiAgICAgIHN0YXRlLnVzZXJJZCA9IHBheWxvYWQudXNlcl9pZDsKICAgICAgc3RhdGUudXNlck5hbWUgPSBwYXlsb2FkLnVzZXJuYW1lOwogICAgICBzdGF0ZS5uaWNrTmFtZSA9IHBheWxvYWQubmlja19uYW1lOwogICAgICBzdGF0ZS51c2VySWNvbiA9IHBheWxvYWQudXNlcl9pY29uOwogICAgICBzdGF0ZS51c2VyTWVzc2FnZSA9IHBheWxvYWQudXNlcl9tZXNzYWdlOwogICAgICByb3V0ZXIucHVzaChwYXlsb2FkLnRvUm91dGUpOwogICAgfSwKICAgIC8vIOmAgOWHuueZu+W9leaXtua4hemZpOeUqOaIt+S/oeaBrwogICAgcmVtb3ZlVXNlck1lc3NhZ2U6IGZ1bmN0aW9uIHJlbW92ZVVzZXJNZXNzYWdlKCkgewogICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCJhdXRoIik7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBqdXN0TG9naW5TeXN0ZW06IGZ1bmN0aW9uIGp1c3RMb2dpblN5c3RlbShfcmVmLCBfcmVmMikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY29tbWl0LCBwYXlsb2FkLCBoOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgcGF5bG9hZCA9IF9yZWYyLnBheWxvYWQ7CiAgICAgICAgICAgICAgICBoID0gX3RoaXMuJGNyZWF0ZUVsZW1lbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgdXJsOiAiL2FwaS91c2VyL2xvZ2luIiwKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICAgIGRhdGE6IHBheWxvYWQKICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMTAwMDAwKSB7CiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgICB1cmw6ICIvYXBpL3VzZXIvbWVzc2FnZSIsCiAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIgogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNzLmRhdGEuY29kZSA9PT0gMTIwMDAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdCgic2F2ZVVzZXJNZXNzYWdlIiwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZXNzLmRhdGEuZGF0YSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdG9Sb3V0ZTogIi8iCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfbm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICAgICAgICAgICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFsiXHU3NjdCXHU1RjU1XHU5NTE5XHU4QkVGOiAiLCBoKCJzcGFuIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICJzdHlsZSI6ICJjb2xvcjogcmVkIgogICAgICAgICAgICAgICAgICAgICAgICB9LCBbcmVzLmRhdGEubXNnXSldKTsKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIuivt+ato+ehruWhq+WGmeaCqOeahOi0puWPt+Wvhuegge+8jOWmguaenOmBl+W/mOivt+WPiuaXtuabtOaNouWvhuegge+8gSIKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IGF1dGg7"},{"version":3,"sources":["/Users/shenxh/Desktop/qa_auto_test/src/store/modules/auth.js"],"names":["router","request","auth","state","JSON","parse","sessionStorage","getItem","userId","userName","nickName","userIcon","userMessage","mutations","saveUserMessage","payload","setItem","stringify","user_id","username","nick_name","user_icon","user_message","push","toRoute","removeUserMessage","removeItem","actions","justLoginSystem","commit","url","method","data","then","res","code","ress","error","message","h","msg","description"],"mappings":";;;;;AAAA,OAAOA,MAAP,MAAmB,cAAnB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AAGA,IAAMC,IAAI,GAAG;AACXC,EAAAA,KAAK,EAAE;AAAA,WACLC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAX,KAA8C;AAC5CC,MAAAA,MAAM,EAAE,MADoC;AAE5CC,MAAAA,QAAQ,EAAE,EAFkC;AAG5CC,MAAAA,QAAQ,EAAE,EAHkC;AAI5CC,MAAAA,QAAQ,EAAE,EAJkC;AAK5CC,MAAAA,WAAW,EAAE;AAL+B,KADzC;AAAA,GADI;AAUXC,EAAAA,SAAS,EAAE;AACTC,IAAAA,eADS,2BACOX,KADP,EACcY,OADd,EACuB;AAC9BT,MAAAA,cAAc,CAACU,OAAf,CAAuB,MAAvB,EAA+BZ,IAAI,CAACa,SAAL,CAAeF,OAAf,CAA/B;AACAZ,MAAAA,KAAK,CAACK,MAAN,GAAeO,OAAO,CAACG,OAAvB;AACAf,MAAAA,KAAK,CAACM,QAAN,GAAiBM,OAAO,CAACI,QAAzB;AACAhB,MAAAA,KAAK,CAACO,QAAN,GAAiBK,OAAO,CAACK,SAAzB;AACAjB,MAAAA,KAAK,CAACQ,QAAN,GAAiBI,OAAO,CAACM,SAAzB;AACAlB,MAAAA,KAAK,CAACS,WAAN,GAAoBG,OAAO,CAACO,YAA5B;AACAtB,MAAAA,MAAM,CAACuB,IAAP,CAAYR,OAAO,CAACS,OAApB;AACD,KATQ;AAUT;AACAC,IAAAA,iBAXS,+BAWW;AAClBnB,MAAAA,cAAc,CAACoB,UAAf,CAA0B,MAA1B;AACD;AAbQ,GAVA;AA0BXC,EAAAA,OAAO,EAAE;AACDC,IAAAA,eADC,wCACwC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAvBC,gBAAAA,MAAuB,QAAvBA,MAAuB;AAAXd,gBAAAA,OAAW,SAAXA,OAAW;AAAA;AAAA;AAAA,uBACvCd,OAAO,CAAC;AACZ6B,kBAAAA,GAAG,EAAE,iBADO;AAEZC,kBAAAA,MAAM,EAAE,MAFI;AAGZC,kBAAAA,IAAI,EAAEjB;AAHM,iBAAD,CAAP,CAIHkB,IAJG,CAIE,UAAAC,GAAG,EAAI;AACb,sBAAIA,GAAG,CAACF,IAAJ,CAASG,IAAT,KAAkB,MAAtB,EAA8B;AAC5BlC,oBAAAA,OAAO,CAAC;AACN6B,sBAAAA,GAAG,EAAE,mBADC;AAENC,sBAAAA,MAAM,EAAE;AAFF,qBAAD,CAAP,CAGGE,IAHH,CAGQ,UAAAG,IAAI,EAAI;AACd,0BAAIA,IAAI,CAACJ,IAAL,CAAUG,IAAV,KAAmB,MAAvB,EAA+B;AAC7BN,wBAAAA,MAAM,CAAC,iBAAD,kCAAyBO,IAAI,CAACJ,IAAL,CAAUA,IAAnC;AAAyCR,0BAAAA,OAAO,EAAE;AAAlD,2BAAN;AACD;AACF,qBAPD;AAQD,mBATD,MASO;AACL,kCAAaa,KAAb,CAAmB;AACjB;AACAC,sBAAAA,OAAO,EAAE,iBAAAC,CAAC;AAAA;AAAA,mCAEY;AAFZ,4BAE0BL,GAAG,CAACF,IAAJ,CAASQ,GAFnC;AAAA,uBAFO;AAOjBC,sBAAAA,WAAW,EAAE;AAPI,qBAAnB;AASD;AACF,iBAzBK,CADuC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2B9C;AA5BM;AA1BE,CAAb;AA0DA,eAAevC,IAAf","sourcesContent":["import router from \"../../router\";\nimport request from \"@/utils/request\";\nimport { notification } from \"ant-design-vue\";\n\nconst auth = {\n  state: () =>\n    JSON.parse(sessionStorage.getItem(\"auth\")) || {\n      userId: \"test\",\n      userName: \"\",\n      nickName: \"\",\n      userIcon: \"\",\n      userMessage: \"\"\n    },\n\n  mutations: {\n    saveUserMessage(state, payload) {\n      sessionStorage.setItem(\"auth\", JSON.stringify(payload));\n      state.userId = payload.user_id;\n      state.userName = payload.username;\n      state.nickName = payload.nick_name;\n      state.userIcon = payload.user_icon;\n      state.userMessage = payload.user_message;\n      router.push(payload.toRoute);\n    },\n    // 退出登录时清除用户信息\n    removeUserMessage() {\n      sessionStorage.removeItem(\"auth\");\n    }\n  },\n\n  actions: {\n    async justLoginSystem({ commit }, { payload }) {\n      await request({\n        url: \"/api/user/login\",\n        method: \"POST\",\n        data: payload\n      }).then(res => {\n        if (res.data.code === 100000) {\n          request({\n            url: \"/api/user/message\",\n            method: \"POST\"\n          }).then(ress => {\n            if (ress.data.code === 120000) {\n              commit(\"saveUserMessage\", { ...ress.data.data, toRoute: \"/\" });\n            }\n          });\n        } else {\n          notification.error({\n            //eslint-disable-next-line no-unused-vars\n            message: h => (\n              <div>\n                登录错误: <span style=\"color: red\">{res.data.msg}</span>\n              </div>\n            ),\n            description: \"请正确填写您的账号密码，如果遗忘请及时更换密码！\"\n          });\n        }\n      });\n    }\n  }\n};\n\nexport default auth;\n"]}]}