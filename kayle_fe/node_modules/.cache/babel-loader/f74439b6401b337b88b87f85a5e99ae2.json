{"remainingRequest":"/Users/shenxh/Desktop/qa_auto_test/node_modules/thread-loader/dist/cjs.js!/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js!/Users/shenxh/Desktop/qa_auto_test/node_modules/eslint-loader/index.js??ref--13-0!/Users/shenxh/Desktop/qa_auto_test/src/store/modules/auth.js","dependencies":[{"path":"/Users/shenxh/Desktop/qa_auto_test/src/store/modules/auth.js","mtime":1609227529420},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJhbnQtZGVzaWduLXZ1ZS9lcy9ub3RpZmljYXRpb24vc3R5bGUiOwppbXBvcnQgX25vdGlmaWNhdGlvbiBmcm9tICJhbnQtZGVzaWduLXZ1ZS9lcy9ub3RpZmljYXRpb24iOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvc2hlbnhoL0Rlc2t0b3AvcWFfYXV0b190ZXN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3NoZW54aC9EZXNrdG9wL3FhX2F1dG9fdGVzdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vLi4vcm91dGVyIjsKaW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKdmFyIGF1dGggPSB7CiAgc3RhdGU6IGZ1bmN0aW9uIHN0YXRlKCkgewogICAgcmV0dXJuIEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXV0aCIpKSB8fCB7CiAgICAgIHVzZXJJZDogInRlc3QiLAogICAgICB1c2VyTmFtZTogIiIsCiAgICAgIHVzZXJJY29uOiAiIiwKICAgICAgdXNlck1lc3NhZ2U6ICIiCiAgICB9OwogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzYXZlVXNlck1lc3NhZ2U6IGZ1bmN0aW9uIHNhdmVVc2VyTWVzc2FnZShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJhdXRoIiwgSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpOwogICAgICBzdGF0ZS51c2VySWQgPSBwYXlsb2FkLnVzZXJfaWQ7CiAgICAgIHN0YXRlLnVzZXJOYW1lID0gcGF5bG9hZC51c2VybmFtZSwgc3RhdGUudXNlckljb24gPSBwYXlsb2FkLnVzZXJfaWNvbiwgc3RhdGUudXNlck1lc3NhZ2UgPSBwYXlsb2FkLnVzZXJfbWVzc2FnZTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGp1c3RMb2dpblN5c3RlbTogZnVuY3Rpb24ganVzdExvZ2luU3lzdGVtKF9yZWYsIF9yZWYyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIHBheWxvYWQsIGg7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgICAgICAgICAgICBwYXlsb2FkID0gX3JlZjIucGF5bG9hZDsKICAgICAgICAgICAgICAgIGggPSBfdGhpcy4kY3JlYXRlRWxlbWVudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QoewogICAgICAgICAgICAgICAgICB1cmw6ICIvYXBpL3VzZXIvbG9naW4iLAogICAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgZGF0YTogcGF5bG9hZAogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAxMDAwMDApIHsKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgIHVybDogIi9hcGkvdXNlci9tZXNzYWdlIiwKICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiCiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3MuZGF0YS5jb2RlID09PSAxMjAwMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0KCJzYXZlVXNlck1lc3NhZ2UiLCBfb2JqZWN0U3ByZWFkKHt9LCByZXNzLmRhdGEuZGF0YSkpOwogICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCgiLyIpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF9ub3RpZmljYXRpb24uZXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoaCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgWyJcdTc2N0JcdTVGNTVcdTk1MTlcdThCRUY6ICIsIGgoInNwYW4iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgInN0eWxlIjogImNvbG9yOiByZWQiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIFtyZXMuZGF0YS5tc2ddKV0pOwogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAi6K+35q2j56Gu5aGr5YaZ5oKo55qE6LSm5Y+35a+G56CB77yM5aaC5p6c6YGX5b+Y6K+35Y+K5pe25pu05o2i5a+G56CB77yBIgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNhdmVVc2VySW5mbzogZnVuY3Rpb24gc2F2ZVVzZXJJbmZvKF9yZWYzLCBkYXRhKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIGNvbW1pdCgic2F2ZVVzZXJNZXNzYWdlIiwgZGF0YSk7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBhdXRoOw=="},{"version":3,"sources":["/Users/shenxh/Desktop/qa_auto_test/src/store/modules/auth.js"],"names":["router","request","auth","state","JSON","parse","sessionStorage","getItem","userId","userName","userIcon","userMessage","mutations","saveUserMessage","payload","setItem","stringify","user_id","username","user_icon","user_message","actions","justLoginSystem","commit","url","method","data","then","res","code","ress","push","error","message","h","msg","description","saveUserInfo"],"mappings":";;;;;AAAA,OAAOA,MAAP,MAAmB,cAAnB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AAGA,IAAMC,IAAI,GAAG;AACXC,EAAAA,KAAK,EAAE;AAAA,WACLC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAX,KAA8C;AAC5CC,MAAAA,MAAM,EAAE,MADoC;AAE5CC,MAAAA,QAAQ,EAAE,EAFkC;AAG5CC,MAAAA,QAAQ,EAAE,EAHkC;AAI5CC,MAAAA,WAAW,EAAE;AAJ+B,KADzC;AAAA,GADI;AASXC,EAAAA,SAAS,EAAE;AACTC,IAAAA,eADS,2BACOV,KADP,EACcW,OADd,EACuB;AAC9BR,MAAAA,cAAc,CAACS,OAAf,CAAuB,MAAvB,EAA+BX,IAAI,CAACY,SAAL,CAAeF,OAAf,CAA/B;AACAX,MAAAA,KAAK,CAACK,MAAN,GAAeM,OAAO,CAACG,OAAvB;AACCd,MAAAA,KAAK,CAACM,QAAN,GAAiBK,OAAO,CAACI,QAA1B,EACGf,KAAK,CAACO,QAAN,GAAiBI,OAAO,CAACK,SAD5B,EAEGhB,KAAK,CAACQ,WAAN,GAAoBG,OAAO,CAACM,YAF/B;AAGD;AAPQ,GATA;AAmBXC,EAAAA,OAAO,EAAE;AACDC,IAAAA,eADC,wCACwC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAvBC,gBAAAA,MAAuB,QAAvBA,MAAuB;AAAXT,gBAAAA,OAAW,SAAXA,OAAW;AAAA;AAAA;AAAA,uBACvCb,OAAO,CAAC;AACZuB,kBAAAA,GAAG,EAAE,iBADO;AAEZC,kBAAAA,MAAM,EAAE,MAFI;AAGZC,kBAAAA,IAAI,EAAEZ;AAHM,iBAAD,CAAP,CAIHa,IAJG,CAIE,UAAAC,GAAG,EAAI;AACb,sBAAIA,GAAG,CAACF,IAAJ,CAASG,IAAT,KAAkB,MAAtB,EAA8B;AAC5B5B,oBAAAA,OAAO,CAAC;AACNuB,sBAAAA,GAAG,EAAE,mBADC;AAENC,sBAAAA,MAAM,EAAE;AAFF,qBAAD,CAAP,CAGGE,IAHH,CAGQ,UAAAG,IAAI,EAAI;AACd,0BAAIA,IAAI,CAACJ,IAAL,CAAUG,IAAV,KAAmB,MAAvB,EAA+B;AAC7BN,wBAAAA,MAAM,CAAC,iBAAD,oBAAyBO,IAAI,CAACJ,IAAL,CAAUA,IAAnC,EAAN;AACA1B,wBAAAA,MAAM,CAAC+B,IAAP,CAAY,GAAZ;AACD;AACF,qBARD;AASD,mBAVD,MAUO;AACL,kCAAaC,KAAb,CAAmB;AACjB;AACAC,sBAAAA,OAAO,EAAE,iBAAAC,CAAC;AAAA;AAAA,mCAEY;AAFZ,4BAE0BN,GAAG,CAACF,IAAJ,CAASS,GAFnC;AAAA,uBAFO;AAOjBC,sBAAAA,WAAW,EAAE;AAPI,qBAAnB;AASD;AACF,iBA1BK,CADuC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4B9C,KA7BM;AA8BPC,IAAAA,YA9BO,+BA8BkBX,IA9BlB,EA8BwB;AAAA,UAAhBH,MAAgB,SAAhBA,MAAgB;AAC7BA,MAAAA,MAAM,CAAC,iBAAD,EAAoBG,IAApB,CAAN;AACD;AAhCM;AAnBE,CAAb;AAuDA,eAAexB,IAAf","sourcesContent":["import router from \"../../router\";\nimport request from \"@/utils/request\";\nimport { notification } from \"ant-design-vue\";\n\nconst auth = {\n  state: () =>\n    JSON.parse(sessionStorage.getItem(\"auth\")) || {\n      userId: \"test\",\n      userName: \"\",\n      userIcon: \"\",\n      userMessage: \"\"\n    },\n\n  mutations: {\n    saveUserMessage(state, payload) {\n      sessionStorage.setItem(\"auth\", JSON.stringify(payload));\n      state.userId = payload.user_id;\n      (state.userName = payload.username),\n        (state.userIcon = payload.user_icon),\n        (state.userMessage = payload.user_message);\n    }\n  },\n\n  actions: {\n    async justLoginSystem({ commit }, { payload }) {\n      await request({\n        url: \"/api/user/login\",\n        method: \"POST\",\n        data: payload\n      }).then(res => {\n        if (res.data.code === 100000) {\n          request({\n            url: \"/api/user/message\",\n            method: \"POST\"\n          }).then(ress => {\n            if (ress.data.code === 120000) {\n              commit(\"saveUserMessage\", { ...ress.data.data });\n              router.push(\"/\");\n            }\n          });\n        } else {\n          notification.error({\n            //eslint-disable-next-line no-unused-vars\n            message: h => (\n              <div>\n                登录错误: <span style=\"color: red\">{res.data.msg}</span>\n              </div>\n            ),\n            description: \"请正确填写您的账号密码，如果遗忘请及时更换密码！\"\n          });\n        }\n      });\n    },\n    saveUserInfo({ commit }, data) {\n      commit(\"saveUserMessage\", data);\n    }\n  }\n};\n\nexport default auth;\n"]}]}