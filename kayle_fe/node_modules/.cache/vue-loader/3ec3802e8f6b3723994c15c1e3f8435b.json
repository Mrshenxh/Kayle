{"remainingRequest":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shenxh/Desktop/qa_auto_test/src/components/modulelist/createmitm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shenxh/Desktop/qa_auto_test/src/components/modulelist/createmitm.vue","mtime":1605432526419},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQge21lc3NhZ2V9IGZyb20gImFudC1kZXNpZ24tdnVlIjsKaW1wb3J0IHJlcXVlc3QgZnJvbSAnQC91dGlscy9yZXF1ZXN0JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybUl0ZW1MYXlvdXQ6IHsKICAgICAgICBsYWJlbENvbDogewogICAgICAgICAgeHM6IHsgc3BhbjogMjQgfSwKICAgICAgICAgIHNtOiB7IHNwYW46IDggfSwKICAgICAgICB9LAogICAgICAgIHdyYXBwZXJDb2w6IHsKICAgICAgICAgIHhzOiB7IHNwYW46IDI0IH0sCiAgICAgICAgICBzbTogeyBzcGFuOiAxNiB9LAogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIGNvbmZpZzogewogICAgICAgIHJ1bGVzOiBbeyB0eXBlOiAnb2JqZWN0JywgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nkuIDkuKrku6PnkIbmnInmlYjml7bpl7QnIH1dLAogICAgICB9LAogICAgICBzaG93U3BpbjogZmFsc2UsCiAgICB9OwogIH0sCiAgYmVmb3JlQ3JlYXRlKCkgewogICAgdGhpcy5mb3JtID0gdGhpcy4kZm9ybS5jcmVhdGVGb3JtKHRoaXMsIHsgbmFtZTogJ3RpbWVfcmVsYXRlZF9jb250cm9scycgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTdWJtaXQoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuZm9ybS52YWxpZGF0ZUZpZWxkcygoZXJyLCBmaWVsZHNWYWx1ZSkgPT4gewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5zaG93U3BpbiA9IHRydWU7CiAgICAgICAgY29uc3QgdmFsdWVzID0gewogICAgICAgICAgLi4uZmllbGRzVmFsdWUsCiAgICAgICAgICAnaG9zdF9saXN0JzogZmllbGRzVmFsdWVbJ3NlbGVjdC1tdWx0aXBsZSddLnRvU3RyaW5nKCksCiAgICAgICAgICAncG9ydCc6IGZpZWxkc1ZhbHVlWydpbnB1dC1wb3J0J10sCiAgICAgICAgICAnZXhwaXJlX3RpbWUnOiBmaWVsZHNWYWx1ZVsnZGF0ZS10aW1lLXBpY2tlciddLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpLAogICAgICAgIH07CiAgICAgICAgY29uc29sZS5sb2coZmllbGRzVmFsdWVbJ2RhdGUtdGltZS1waWNrZXInXSk7CiAgICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIHZhbHVlcyBvZiBmb3JtOiAnLCB2YWx1ZXMpOwogICAgICAgIHJlcXVlc3QoewogICAgICAgICAgICB1cmw6ICIvYXBpL3RlbXBpbnRlci9jcmVhdGVtaXRtIiwKICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgIGRhdGE6IHZhbHVlcywKICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMTAwMDIpIHsKICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tc2cpOwogICAgICAgICAgICB9ZWxzZSBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjEwMDAzKXsKICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2FybmluZyhyZXMuZGF0YS5tc2cpOwogICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yKCLmnKrnn6XplJnor6/vvIzmnI3liqHnq6/lj5HnlJ/lvILluLgiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCh7dHlwZTonZ2V0VXNlck1pdG1wcm94eSd9KS50aGVuKCgpPT57CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi6LWw6L+Z6YeM5LmIIik7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dTcGluID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdjcmVhdGUtZXZlbnQnLCByZXMuZGF0YS5kYXRhKTsKICAgICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9KTsKICAgIH0sCiAgICBvbkNoYW5nZShlKSB7CiAgICAgICAgY29uc29sZS5sb2coIui1sOeahOi/memHjO+8n++8n++8nyIpCiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["createmitm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"createmitm.vue","sourceRoot":"src/components/modulelist","sourcesContent":["<template>\n<a-spin :spinning=\"showSpin\">\n<div class=\"total-rouad\">\n      <a-form v-bind=\"formItemLayout\" :form=\"form\" @submit=\"handleSubmit\" style=\"width:calc(60%);float:left;\">\n          <a-form-item class=\"label-select\">\n              <H4>创建mitmproxy代理</H4>\n          </a-form-item>\n      <a-form-item label=\"代理Port\" class=\"host-select\">\n          <a-input placeholder=\"输入创建代理端口号，如8808\" allow-clear @change=\"onChange\"  v-decorator=\"[\n          'input-port',\n          {\n            rules: [\n              { required: true, message: '请输入要创建mitmproxy的端口号', type: 'string' },\n            ],\n          },\n        ]\" />\n      </a-form-item>\n\n      <a-form-item label=\"筛选host\" class=\"host-select\">\n    <a-select\n        v-decorator=\"[\n          'select-multiple',\n          {\n            rules: [\n              { required: true, message: 'Please select your favourite colors!', type: 'array' },\n            ],\n          },\n        ]\"\n        mode=\"multiple\"\n        placeholder=\"请选择要筛选的host\"\n      >\n        <a-select-option value=\"api.zhihu.com\">\n          api.zhihu.com\n        </a-select-option>\n        <a-select-option value=\"green\">\n          Green\n        </a-select-option>\n        <a-select-option value=\"blue\">\n          Blue\n        </a-select-option>\n      </a-select>\n    </a-form-item>\n    <a-form-item label=\"代理时间\" class=\"host-select\">\n      <a-date-picker\n        v-decorator=\"['date-time-picker', config]\"\n        show-time\n        format=\"YYYY-MM-DD HH:mm:ss\"\n        />\n    </a-form-item>\n    <a-form-item\n      :wrapper-col=\"{\n        xs: { span: 24, offset: 0 },\n        sm: { span: 16, offset: 8 },\n      }\"\n      class=\"host-select\"\n    >\n      <a-button type=\"primary\" html-type=\"submit\">\n        创建\n      </a-button>\n    </a-form-item>\n  </a-form>\n    <div style=\"width:calc(40%);float:left;\">\n        <a-card title=\"创建说明\" style=\"width: 300px\">\n            <a slot=\"extra\" href=\"#\">更多</a>\n            <p>1、使用mitmproxy需要先创建一个属于自己的端口号来监听流量</p>\n            <p>2、目前支持筛选指定host的流量，如api.zhihu.com</p>\n            <p>3、使用代理结束后，可以主动销毁mitmproxy，系统也会根据有效时间定时销毁</p>\n        </a-card>\n    </div>\n</div>\n</a-spin>\n</template>\n<script>\n\nimport {message} from \"ant-design-vue\";\nimport request from '@/utils/request';\n\nexport default {\n  data() {\n    return {\n      formItemLayout: {\n        labelCol: {\n          xs: { span: 24 },\n          sm: { span: 8 },\n        },\n        wrapperCol: {\n          xs: { span: 24 },\n          sm: { span: 16 },\n        },\n      },\n      config: {\n        rules: [{ type: 'object', required: true, message: '请选择一个代理有效时间' }],\n      },\n      showSpin: false,\n    };\n  },\n  beforeCreate() {\n    this.form = this.$form.createForm(this, { name: 'time_related_controls' });\n  },\n  methods: {\n    handleSubmit(e) {\n      e.preventDefault();\n      this.form.validateFields((err, fieldsValue) => {\n        if (err) {\n          return;\n        }\n        this.showSpin = true;\n        const values = {\n          ...fieldsValue,\n          'host_list': fieldsValue['select-multiple'].toString(),\n          'port': fieldsValue['input-port'],\n          'expire_time': fieldsValue['date-time-picker'].format('YYYY-MM-DD HH:mm:ss'),\n        };\n        console.log(fieldsValue['date-time-picker']);\n        console.log('Received values of form: ', values);\n        request({\n            url: \"/api/tempinter/createmitm\",\n            method: \"POST\",\n            data: values,\n        }).then(res => {\n            if (res.data.code === 210002) {\n                message.success(res.data.msg);\n            }else if (res.data.code === 210003){\n                message.warning(res.data.msg);\n            }else {\n                message.error(\"未知错误，服务端发生异常\");\n            }\n            this.$store.dispatch({type:'getUserMitmproxy'}).then(()=>{\n                console.log(\"走这里么\");\n                this.showSpin = false;\n                this.$emit('create-event', res.data.data);\n            })\n        })\n      });\n    },\n    onChange(e) {\n        console.log(\"走的这里？？？\")\n        console.log(e);\n    },\n  },\n};\n</script>\n\n<style scoped>\n\n@media (min-width: 900px){\n  .host-select {\n    width: calc(60%);\n  }\n  .label-select {\n    margin-left: calc(10%);\n}\n}\n\n@media (max-width: 900px) {\n  .host-select {\n    width: calc(70%);\n  }\n}\n\n.total-rouad {\n    display:inline;\n}\n\n.example {\n  text-align: center;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding: 30px 50px;\n  margin: 20px 0;\n}\n\n</style>"]}]}