{"remainingRequest":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shenxh/Desktop/qa_auto_test/src/components/testplan/createplan.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shenxh/Desktop/qa_auto_test/src/components/testplan/createplan.vue","mtime":1612512965535},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdCI7CmltcG9ydCB7IG1lc3NhZ2UgfSBmcm9tICJhbnQtZGVzaWduLXZ1ZSI7CmltcG9ydCB7IGJlbG9uZ0J1c2luZXNzIH0gZnJvbSAiQC91dGlscy9jb21tb25jb25maWciOwppbXBvcnQgaGlzdG9yeXBsYW4gZnJvbSAiQC9jb21wb25lbnRzL3Rlc3RwbGFuL2hpc3RvcnlwbGFuIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc29uVmlzaWJsZTogZmFsc2UsCiAgICAgIGxhYmVsQ29sOiB7IHNwYW46IDQgfSwKICAgICAgd3JhcHBlckNvbDogeyBzcGFuOiAxNCB9LAogICAgICBzaG93Q3JlYXRlVmlldzogdHJ1ZSwKICAgICAgc2hvd0hpc3RvcnlWaWV3OiBmYWxzZSwKICAgICAgYmVsb25nQnVzaW5lc3M6IGJlbG9uZ0J1c2luZXNzLAogICAgICBmb3JtOiB7CiAgICAgICAgY2xpZW50VmVyc2lvbjogIiIsCiAgICAgICAgcGxhbkJ1c2luZXNzOiBbXSwKICAgICAgICBwbGFuU3RhcnQ6ICIiLAogICAgICAgIHBsYW5FbmQ6ICIiCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgY2xpZW50VmVyc2lvbjogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeacrOasoeWbnuW9kuiuoeWIkueJiOacrCIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbWluOiAzLAogICAgICAgICAgICBtYXg6IDEwLAogICAgICAgICAgICBtZXNzYWdlOiAi6K6h5YiS54mI5pys5Li6M++9njEw5Liq5a2X56ym6ZW/5bqmIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBwbGFuQnVzaW5lc3M6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fpgInmi6nmiYDlsZ7kuJrliqEiLAogICAgICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIiwKICAgICAgICAgICAgdHlwZTogImFycmF5IgogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgcGxhblN0YXJ0OiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36YCJ5oup6K6h5YiS5byA5aeL5pe26Ze0IiwgdHJpZ2dlcjogImNoYW5nZSIgfQogICAgICAgIF0sCiAgICAgICAgcGxhbkVuZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqeiuoeWIkue7k+adn+aXtumXtCIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0KICAgICAgICBdCiAgICAgIH0KICAgIH07CiAgfSwKICAvLyDov5nph4zopoHkvb/nlKjkuIDkuKrnm5HlkKzlsZ7mgKfvvIzmo4DmtYvniLblsZ7mgKd2aXNpYmxl55qE5Y+Y5YyWCiAgd2F0Y2g6IHsKICAgIHZpc2libGUoKSB7CiAgICAgIHRoaXMuc29uVmlzaWJsZSA9IHRoaXMudmlzaWJsZTsKICAgIH0sCiAgICBub3dDb2x1bW5zKCkgewogICAgICB0aGlzLmZvcm0uaW50ZXJmYWNlUGF0aCA9IHRoaXMubm93Q29sdW1ucy5pbnRlcmZhY2VQYXRoOwogICAgICB0aGlzLmZvcm0uaW50ZXJmYWNlUmVndWxhciA9IHRoaXMubm93Q29sdW1ucy5pbnRlcmZhY2VSZWd1bGFyOwogICAgICB0aGlzLmZvcm0uYmVsb25nQnVzaW5lc3MgPSB0aGlzLm5vd0NvbHVtbnMuY29udGVudDsKICAgICAgdGhpcy5mb3JtLmludGVyZmFjZURlc2MgPSB0aGlzLm5vd0NvbHVtbnMuaW50ZXJmYWNlRGVzYzsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGhpc3RvcnlwbGFuCiAgfSwKICBwcm9wczogWyJ2aXNpYmxlIiwgIm5vd0NvbHVtbnMiXSwKICBtZXRob2RzOiB7CiAgICBvblN1Ym1pdCgpIHsKICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBjb25zdCBkYXRhRm9ybSA9IHsKICAgICAgICAgICAgY2xpZW50VmVyc2lvbjogdGhpcy5mb3JtLmNsaWVudFZlcnNpb24sCiAgICAgICAgICAgIHBsYW5CdXNpbmVzczogdGhpcy5mb3JtLnBsYW5CdXNpbmVzcywKICAgICAgICAgICAgcGxhblN0YXJ0OiB0aGlzLmZvcm0ucGxhblN0YXJ0LmZvcm1hdCgiWVlZWS1NTS1ERCBISDptbTpzcyIpLAogICAgICAgICAgICBwbGFuRW5kOiB0aGlzLmZvcm0ucGxhbkVuZC5mb3JtYXQoIllZWVktTU0tREQgSEg6bW06c3MiKQogICAgICAgICAgfTsKICAgICAgICAgIHJlcXVlc3QoewogICAgICAgICAgICB1cmw6ICIvYXBpL3BsYW4vY3JlYXRlcGxhbiIsCiAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICBkYXRhOiBkYXRhRm9ybQogICAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMzAwMDAwKSB7CiAgICAgICAgICAgICAgbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICog6K6h5YiS5Yib5bu65oiQ5Yqf77yM5Zue6LCD57uZ54i257uE5Lu2CiAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgiY3JlYXRlZFBsYW4iLCByZXMuZGF0YS5tc2cpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1lc3NhZ2Uud2FybmluZyhyZXMuZGF0YS5tc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRGb3JtKCkgewogICAgICB0aGlzLiRyZWZzLnJ1bGVGb3JtLnJlc2V0RmllbGRzKCk7CiAgICB9LAogICAgaGFuZGxlQ2hhbmdlKHZhbHVlKSB7CiAgICAgIGNvbnNvbGUubG9nKGBTZWxlY3RlZDogJHt2YWx1ZX1gKTsKICAgIH0sCiAgICBzaG93SGlzdG9yeVBsYW4oKSB7CiAgICAgIGNvbnNvbGUubG9nKCJzaG93SGlzdG9yeVBsYW4iKTsKICAgICAgY29uc29sZS5sb2coInNob3dIaXN0b3J5UGxhbiIpOwogICAgICB0aGlzLnNob3dDcmVhdGVWaWV3ID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd0hpc3RvcnlWaWV3ID0gdHJ1ZTsKICAgIH0sCiAgICBjbG9zZVBsYW5MaXN0KCkgewogICAgICBjb25zb2xlLmxvZygiY2xvc2VIaXN0b3J5UGxhbiIpOwogICAgICB0aGlzLnNob3dDcmVhdGVWaWV3ID0gdHJ1ZTsKICAgICAgdGhpcy5zaG93SGlzdG9yeVZpZXcgPSBmYWxzZTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["createplan.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"createplan.vue","sourceRoot":"src/components/testplan","sourcesContent":["<template>\n  <div>\n    <div v-show=\"showCreateView\">\n      <a-page-header title=\"创建计划\" sub-title=\"没有在运行中的回归计划\">\n        <template slot=\"tags\">\n          <a-tag color=\"brown\">\n            未创建\n          </a-tag>\n        </template>\n        <template slot=\"extra\">\n          <a-button key=\"3\" @click=\"showHistoryPlan\">\n            历史计划\n          </a-button>\n        </template>\n      </a-page-header>\n\n      <a-row :gutter=\"8\">\n        <a-col :span=\"10\">\n          <a-form-model\n            ref=\"ruleForm\"\n            :model=\"form\"\n            :rules=\"rules\"\n            :label-col=\"labelCol\"\n            :wrapper-col=\"wrapperCol\"\n            style=\"width:500px;padding: 20px;\"\n          >\n            <a-form-model-item\n              ref=\"clientVersion\"\n              label=\"测试版本\"\n              prop=\"clientVersion\"\n            >\n              <a-input\n                v-model=\"form.clientVersion\"\n                @blur=\"\n                  () => {\n                    $refs.clientVersion.onFieldBlur();\n                  }\n                \"\n              />\n            </a-form-model-item>\n\n            <a-form-model-item label=\"业务范围\" prop=\"planBusiness\">\n              <a-select\n                mode=\"tags\"\n                v-model=\"form.planBusiness\"\n                placeholder=\"请选择本次计划覆盖业务\"\n                @change=\"handleChange\"\n              >\n                <a-select-option\n                  v-for=\"(item, index) in belongBusiness\"\n                  :key=\"index\"\n                  :value=\"item.busValue\"\n                >\n                  {{ item.busName }}\n                </a-select-option>\n              </a-select>\n            </a-form-model-item>\n\n            <a-form-model-item label=\"开始时间\" prop=\"planStart\">\n              <a-date-picker\n                v-model=\"form.planStart\"\n                show-time\n                type=\"date\"\n                placeholder=\"请选择开始时间\"\n                style=\"width: 100%;\"\n              />\n            </a-form-model-item>\n\n            <a-form-model-item label=\"结束时间\" prop=\"planEnd\">\n              <a-date-picker\n                v-model=\"form.planEnd\"\n                show-time\n                type=\"date\"\n                placeholder=\"请选择结束时间\"\n                style=\"width: 100%;\"\n              />\n            </a-form-model-item>\n\n            <a-form-model-item :wrapper-col=\"{ span: 14, offset: 4 }\">\n              <a-button type=\"primary\" @click=\"onSubmit\">\n                创建计划\n              </a-button>\n              <a-button style=\"margin-left: 10px;\" @click=\"resetForm\">\n                重置数据\n              </a-button>\n            </a-form-model-item>\n          </a-form-model>\n        </a-col>\n        <a-col :span=\"14\">\n          <a-card title=\"创建说明\" style=\"width: 500px;margin-left:10px;\">\n            <div>\n              <h4>测试版本</h4>\n              输入本次匹配上传的版本号，如iOS回归包，版本为6.69.0-test;Android为6.69.0-beta，则填写6.69.0即可。\n            </div>\n            <br />\n            <div>\n              <h4>业务范围</h4>\n              选择相关业务模块，则本次计划会覆盖业务模块下所有接口\n            </div>\n            <br />\n            <div>\n              <h4>开始/结束时间</h4>\n              选择开始/结束时间，则本次计划会在此时间段内做覆盖采集\n            </div>\n          </a-card>\n        </a-col>\n      </a-row>\n    </div>\n\n    <historyplan\n      v-show=\"showHistoryView\"\n      @closeHistory=\"closePlanList\"\n    ></historyplan>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\nimport { message } from \"ant-design-vue\";\nimport { belongBusiness } from \"@/utils/commonconfig\";\nimport historyplan from \"@/components/testplan/historyplan\";\n\nexport default {\n  data() {\n    return {\n      sonVisible: false,\n      labelCol: { span: 4 },\n      wrapperCol: { span: 14 },\n      showCreateView: true,\n      showHistoryView: false,\n      belongBusiness: belongBusiness,\n      form: {\n        clientVersion: \"\",\n        planBusiness: [],\n        planStart: \"\",\n        planEnd: \"\"\n      },\n      rules: {\n        clientVersion: [\n          {\n            required: true,\n            message: \"请输入本次回归计划版本\",\n            trigger: \"blur\"\n          },\n          {\n            min: 3,\n            max: 10,\n            message: \"计划版本为3～10个字符长度\",\n            trigger: \"blur\"\n          }\n        ],\n        planBusiness: [\n          {\n            required: true,\n            message: \"请选择所属业务\",\n            trigger: \"change\",\n            type: \"array\"\n          }\n        ],\n        planStart: [\n          { required: true, message: \"请选择计划开始时间\", trigger: \"change\" }\n        ],\n        planEnd: [\n          { required: true, message: \"请选择计划结束时间\", trigger: \"change\" }\n        ]\n      }\n    };\n  },\n  // 这里要使用一个监听属性，检测父属性visible的变化\n  watch: {\n    visible() {\n      this.sonVisible = this.visible;\n    },\n    nowColumns() {\n      this.form.interfacePath = this.nowColumns.interfacePath;\n      this.form.interfaceRegular = this.nowColumns.interfaceRegular;\n      this.form.belongBusiness = this.nowColumns.content;\n      this.form.interfaceDesc = this.nowColumns.interfaceDesc;\n    }\n  },\n  components: {\n    historyplan\n  },\n  props: [\"visible\", \"nowColumns\"],\n  methods: {\n    onSubmit() {\n      this.$refs.ruleForm.validate(valid => {\n        if (valid) {\n          const dataForm = {\n            clientVersion: this.form.clientVersion,\n            planBusiness: this.form.planBusiness,\n            planStart: this.form.planStart.format(\"YYYY-MM-DD HH:mm:ss\"),\n            planEnd: this.form.planEnd.format(\"YYYY-MM-DD HH:mm:ss\")\n          };\n          request({\n            url: \"/api/plan/createplan\",\n            method: \"POST\",\n            data: dataForm\n          }).then(res => {\n            if (res.data.code === 300000) {\n              message.success(res.data.msg);\n              /**\n               * 计划创建成功，回调给父组件\n               */\n              this.$emit(\"createdPlan\", res.data.msg);\n            } else {\n              message.warning(res.data.msg);\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm() {\n      this.$refs.ruleForm.resetFields();\n    },\n    handleChange(value) {\n      console.log(`Selected: ${value}`);\n    },\n    showHistoryPlan() {\n      console.log(\"showHistoryPlan\");\n      console.log(\"showHistoryPlan\");\n      this.showCreateView = false;\n      this.showHistoryView = true;\n    },\n    closePlanList() {\n      console.log(\"closeHistoryPlan\");\n      this.showCreateView = true;\n      this.showHistoryView = false;\n    }\n  }\n};\n</script>\n\n<style></style>\n"]}]}