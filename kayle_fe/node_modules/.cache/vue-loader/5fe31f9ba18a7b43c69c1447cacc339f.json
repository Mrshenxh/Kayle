{"remainingRequest":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shenxh/Desktop/qa_auto_test/src/components/modulelist/createmitm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shenxh/Desktop/qa_auto_test/src/components/modulelist/createmitm.vue","mtime":1609227529413},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1lc3NhZ2UgfSBmcm9tICJhbnQtZGVzaWduLXZ1ZSI7CmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1JdGVtTGF5b3V0OiB7CiAgICAgICAgbGFiZWxDb2w6IHsKICAgICAgICAgIHhzOiB7IHNwYW46IDI0IH0sCiAgICAgICAgICBzbTogeyBzcGFuOiA4IH0KICAgICAgICB9LAogICAgICAgIHdyYXBwZXJDb2w6IHsKICAgICAgICAgIHhzOiB7IHNwYW46IDI0IH0sCiAgICAgICAgICBzbTogeyBzcGFuOiAxNiB9CiAgICAgICAgfQogICAgICB9LAogICAgICBjb25maWc6IHsKICAgICAgICBydWxlczogWwogICAgICAgICAgeyB0eXBlOiAib2JqZWN0IiwgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nkuIDkuKrku6PnkIbmnInmlYjml7bpl7QiIH0KICAgICAgICBdCiAgICAgIH0sCiAgICAgIHNob3dTcGluOiBmYWxzZQogICAgfTsKICB9LAogIGJlZm9yZUNyZWF0ZSgpIHsKICAgIHRoaXMuZm9ybSA9IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzLCB7IG5hbWU6ICJ0aW1lX3JlbGF0ZWRfY29udHJvbHMiIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU3VibWl0KGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLmZvcm0udmFsaWRhdGVGaWVsZHMoKGVyciwgZmllbGRzVmFsdWUpID0+IHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuc2hvd1NwaW4gPSB0cnVlOwogICAgICAgIGNvbnN0IHZhbHVlcyA9IHsKICAgICAgICAgIC4uLmZpZWxkc1ZhbHVlLAogICAgICAgICAgaG9zdF9saXN0OiBmaWVsZHNWYWx1ZVsic2VsZWN0LW11bHRpcGxlIl0udG9TdHJpbmcoKSwKICAgICAgICAgIHBvcnQ6IGZpZWxkc1ZhbHVlWyJpbnB1dC1wb3J0Il0sCiAgICAgICAgICBleHBpcmVfdGltZTogZmllbGRzVmFsdWVbImRhdGUtdGltZS1waWNrZXIiXS5mb3JtYXQoCiAgICAgICAgICAgICJZWVlZLU1NLUREIEhIOm1tOnNzIgogICAgICAgICAgKQogICAgICAgIH07CiAgICAgICAgY29uc29sZS5sb2coZmllbGRzVmFsdWVbImRhdGUtdGltZS1waWNrZXIiXSk7CiAgICAgICAgY29uc29sZS5sb2coIlJlY2VpdmVkIHZhbHVlcyBvZiBmb3JtOiAiLCB2YWx1ZXMpOwogICAgICAgIHJlcXVlc3QoewogICAgICAgICAgdXJsOiAiL2FwaS90ZW1waW50ZXIvY3JlYXRlbWl0bSIsCiAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgIGRhdGE6IHZhbHVlcwogICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMTAwMDIpIHsKICAgICAgICAgICAgbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIxMDAwMykgewogICAgICAgICAgICBtZXNzYWdlLndhcm5pbmcocmVzLmRhdGEubXNnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3IoIuacquefpemUmeivr++8jOacjeWKoeerr+WPkeeUn+W8guW4uCIpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiAiZ2V0VXNlck1pdG1wcm94eSIgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLotbDov5nph4zkuYgiKTsKICAgICAgICAgICAgdGhpcy5zaG93U3BpbiA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLiRlbWl0KCJjcmVhdGUtZXZlbnQiLCByZXMuZGF0YS5kYXRhKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBvbkNoYW5nZShlKSB7CiAgICAgIGNvbnNvbGUubG9nKCLotbDnmoTov5nph4zvvJ/vvJ/vvJ8iKTsKICAgICAgY29uc29sZS5sb2coZSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["createmitm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"createmitm.vue","sourceRoot":"src/components/modulelist","sourcesContent":["<template>\n  <a-spin :spinning=\"showSpin\">\n    <div class=\"total-rouad\">\n      <a-form\n        v-bind=\"formItemLayout\"\n        :form=\"form\"\n        @submit=\"handleSubmit\"\n        style=\"width:calc(60%);float:left;\"\n      >\n        <a-form-item class=\"label-select\">\n          <H4>创建mitmproxy代理</H4>\n        </a-form-item>\n        <a-form-item label=\"代理Port\" class=\"host-select\">\n          <a-input\n            placeholder=\"输入创建代理端口号，如8808\"\n            allow-clear\n            @change=\"onChange\"\n            v-decorator=\"[\n              'input-port',\n              {\n                rules: [\n                  {\n                    required: true,\n                    message: '请输入要创建mitmproxy的端口号',\n                    type: 'string'\n                  }\n                ]\n              }\n            ]\"\n          />\n        </a-form-item>\n\n        <a-form-item label=\"筛选host\" class=\"host-select\">\n          <a-select\n            v-decorator=\"[\n              'select-multiple',\n              {\n                rules: [\n                  {\n                    required: true,\n                    message: 'Please select your favourite colors!',\n                    type: 'array'\n                  }\n                ]\n              }\n            ]\"\n            mode=\"multiple\"\n            placeholder=\"请选择要筛选的host\"\n          >\n            <a-select-option value=\"api.zhihu.com\">\n              api.zhihu.com\n            </a-select-option>\n            <a-select-option value=\"green\">\n              Green\n            </a-select-option>\n            <a-select-option value=\"blue\">\n              Blue\n            </a-select-option>\n          </a-select>\n        </a-form-item>\n        <a-form-item label=\"代理时间\" class=\"host-select\">\n          <a-date-picker\n            v-decorator=\"['date-time-picker', config]\"\n            show-time\n            format=\"YYYY-MM-DD HH:mm:ss\"\n          />\n        </a-form-item>\n        <a-form-item\n          :wrapper-col=\"{\n            xs: { span: 24, offset: 0 },\n            sm: { span: 16, offset: 8 }\n          }\"\n          class=\"host-select\"\n        >\n          <a-button type=\"primary\" html-type=\"submit\">\n            创建\n          </a-button>\n        </a-form-item>\n      </a-form>\n      <div style=\"width:calc(40%);float:left;\">\n        <a-card title=\"创建说明\" style=\"width: 300px\">\n          <a slot=\"extra\" href=\"#\">更多</a>\n          <p>1、使用mitmproxy需要先创建一个属于自己的端口号来监听流量</p>\n          <p>2、目前支持筛选指定host的流量，如api.zhihu.com</p>\n          <p>\n            3、使用代理结束后，可以主动销毁mitmproxy，系统也会根据有效时间定时销毁\n          </p>\n        </a-card>\n      </div>\n    </div>\n  </a-spin>\n</template>\n<script>\nimport { message } from \"ant-design-vue\";\nimport request from \"@/utils/request\";\n\nexport default {\n  data() {\n    return {\n      formItemLayout: {\n        labelCol: {\n          xs: { span: 24 },\n          sm: { span: 8 }\n        },\n        wrapperCol: {\n          xs: { span: 24 },\n          sm: { span: 16 }\n        }\n      },\n      config: {\n        rules: [\n          { type: \"object\", required: true, message: \"请选择一个代理有效时间\" }\n        ]\n      },\n      showSpin: false\n    };\n  },\n  beforeCreate() {\n    this.form = this.$form.createForm(this, { name: \"time_related_controls\" });\n  },\n  methods: {\n    handleSubmit(e) {\n      e.preventDefault();\n      this.form.validateFields((err, fieldsValue) => {\n        if (err) {\n          return;\n        }\n        this.showSpin = true;\n        const values = {\n          ...fieldsValue,\n          host_list: fieldsValue[\"select-multiple\"].toString(),\n          port: fieldsValue[\"input-port\"],\n          expire_time: fieldsValue[\"date-time-picker\"].format(\n            \"YYYY-MM-DD HH:mm:ss\"\n          )\n        };\n        console.log(fieldsValue[\"date-time-picker\"]);\n        console.log(\"Received values of form: \", values);\n        request({\n          url: \"/api/tempinter/createmitm\",\n          method: \"POST\",\n          data: values\n        }).then(res => {\n          if (res.data.code === 210002) {\n            message.success(res.data.msg);\n          } else if (res.data.code === 210003) {\n            message.warning(res.data.msg);\n          } else {\n            message.error(\"未知错误，服务端发生异常\");\n          }\n          this.$store.dispatch({ type: \"getUserMitmproxy\" }).then(() => {\n            console.log(\"走这里么\");\n            this.showSpin = false;\n            this.$emit(\"create-event\", res.data.data);\n          });\n        });\n      });\n    },\n    onChange(e) {\n      console.log(\"走的这里？？？\");\n      console.log(e);\n    }\n  }\n};\n</script>\n\n<style scoped>\n@media (min-width: 900px) {\n  .host-select {\n    width: calc(60%);\n  }\n  .label-select {\n    margin-left: calc(10%);\n  }\n}\n\n@media (max-width: 900px) {\n  .host-select {\n    width: calc(70%);\n  }\n}\n\n.total-rouad {\n  display: inline;\n}\n\n.example {\n  text-align: center;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding: 30px 50px;\n  margin: 20px 0;\n}\n</style>\n"]}]}