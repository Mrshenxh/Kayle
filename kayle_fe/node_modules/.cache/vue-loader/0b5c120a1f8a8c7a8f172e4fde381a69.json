{"remainingRequest":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shenxh/Desktop/qa_auto_test/src/components/modulelist/uploadmodal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shenxh/Desktop/qa_auto_test/src/components/modulelist/uploadmodal.vue","mtime":1609398380406},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdCI7CmltcG9ydCB7IG1lc3NhZ2UgfSBmcm9tICJhbnQtZGVzaWduLXZ1ZSI7CgovLyDmoLjlv4PmjqXlj6PkuIrkvKBtb2RhbApleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIC8qKgogICAgICogc29uVmlzaWJsZTog5by556qX5piv5ZCm5Y+v6KeBCiAgICAgKiBsYWJlbENvbO+8jHdyYXBwZXJDb2w6IOavj+S4gOS4qkl0ZW3miYDljaDplb/luqbmr5TkvovliIbluIMKICAgICAqIGZvcm06IOihqOWNleaVsOaNrgogICAgICogcnVsZXM6IOihqOWNleagoemqjOinhOWImQogICAgICovCiAgICByZXR1cm4gewogICAgICBzb25WaXNpYmxlOiBmYWxzZSwKICAgICAgbGFiZWxDb2w6IHsgc3BhbjogNCB9LAogICAgICB3cmFwcGVyQ29sOiB7IHNwYW46IDE0IH0sCiAgICAgIGZvcm06IHsKICAgICAgICBpbnRlcmZhY2VQYXRoOiAiIiwKICAgICAgICBpbnRlcmZhY2VSZWd1bGFyOiAiIiwKICAgICAgICBiZWxvbmdCdXNpbmVzczogdW5kZWZpbmVkLAogICAgICAgIGludGVyZmFjZURlc2M6ICIiCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgaW50ZXJmYWNlUGF0aDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeaOpeWPo+i3r+W+hCIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgewogICAgICAgICAgICBtaW46IDEwLAogICAgICAgICAgICBtYXg6IDIwMCwKICAgICAgICAgICAgbWVzc2FnZTogIuaOpeWPo+i3r+W+hOmZkOWItuWcqDEw772eMjAw5Liq5a2X56ymIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBpbnRlcmZhY2VSZWd1bGFyOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5o6l5Y+j5Yy56YWN5q2j5YiZIiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG1pbjogMTAsCiAgICAgICAgICAgIG1heDogMjAwLAogICAgICAgICAgICBtZXNzYWdlOiAi5o6l5Y+j5Yy56YWN5q2j5YiZ6ZmQ5Yi25ZyoNe+9njEwMOS4quWtl+espiIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgYmVsb25nQnVzaW5lc3M6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nmjqXlj6PmiYDlsZ7kuJrliqHnur8iLCB0cmlnZ2VyOiAiY2hhbmdlIiB9CiAgICAgICAgXSwKICAgICAgICBpbnRlcmZhY2VEZXNjOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5o6l5Y+j5o+P6L+w5L+h5oGvIiwgdHJpZ2dlcjogImJsdXIiIH0KICAgICAgICBdCiAgICAgIH0KICAgIH07CiAgfSwKICBwcm9wczogWyJ2aXNpYmxlIiwgIm5vd0NvbHVtbnMiXSwKICAvLyDov5nph4zopoHkvb/nlKjkuIDkuKrnm5HlkKzlsZ7mgKfvvIzmo4DmtYvniLblsZ7mgKd2aXNpYmxl55qE5Y+Y5YyWCiAgd2F0Y2g6IHsKICAgIHZpc2libGUoKSB7CiAgICAgIHRoaXMuc29uVmlzaWJsZSA9IHRoaXMudmlzaWJsZTsKICAgIH0sCiAgICBub3dDb2x1bW5zKCkgewogICAgICB0aGlzLmZvcm0uaW50ZXJmYWNlUGF0aCA9IHRoaXMubm93Q29sdW1ucy5pbnRlcmZhY2VQYXRoOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiBoYW5kbGVVcGxvYWQ6IOS4iuS8oOaOpeWPowogICAgICogaGFuZGxlQ2FuY2VsOiDngrnlh7vlj5bmtojor7fmsYLmjqXlj6MKICAgICAqIHJlc2V0Rm9ybTog6YeN572uZm9ybeihqOWNleaVsOaNrgogICAgICovCiAgICBoYW5kbGVVcGxvYWQoZSkgewogICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBjb25zdCB2YWx1ZXMgPSB7CiAgICAgICAgICAgIC4uLnRoaXMubm93Q29sdW1ucywKICAgICAgICAgICAgLi4udGhpcy5mb3JtCiAgICAgICAgICB9OwogICAgICAgICAgcmVxdWVzdCh7CiAgICAgICAgICAgIHVybDogIi9hcGkvdGVtcGludGVyL3VwbG9hZGNvcmVpbnRlciIsCiAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICBkYXRhOiB2YWx1ZXMKICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMDAwMCkgewogICAgICAgICAgICAgIG1lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tc2cpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMDAwMikgewogICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yKCLmnKrnn6XplJnor6/vvIzmnI3liqHnq6/lj5HnlJ/lvILluLgiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLiRlbWl0KCJjaGFuZ2VVcGxvYWRQb3AiLCBmYWxzZSk7CiAgICB9LAogICAgaGFuZGxlQ2FuY2VsKGUpIHsKICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIHRoaXMuJGVtaXQoImNoYW5nZVVwbG9hZFBvcCIsIGZhbHNlKTsKICAgIH0sCgogICAgcmVzZXRGb3JtKCkgewogICAgICB0aGlzLiRyZWZzLnJ1bGVGb3JtLnJlc2V0RmllbGRzKCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["uploadmodal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"uploadmodal.vue","sourceRoot":"src/components/modulelist","sourcesContent":["<template>\n  <div>\n    <a-modal\n      v-model=\"sonVisible\"\n      title=\"核心接口上传\"\n      @ok=\"handleUpload\"\n      okText=\"确认上传\"\n      @cancel=\"handleCancel\"\n      cancelText=\"取消上传\"\n    >\n      <a-form-model\n        ref=\"ruleForm\"\n        :model=\"form\"\n        :rules=\"rules\"\n        :label-col=\"labelCol\"\n        :wrapper-col=\"wrapperCol\"\n      >\n        <a-form-model-item\n          ref=\"interfacePath\"\n          label=\"接口名称\"\n          prop=\"interfacePath\"\n        >\n          <a-input\n            v-model=\"form.interfacePath\"\n            @blur=\"\n              () => {\n                $refs.interfacePath.onFieldBlur();\n              }\n            \"\n          />\n        </a-form-model-item>\n\n        <a-form-model-item\n          ref=\"interfaceRegular\"\n          label=\"匹配正则\"\n          prop=\"interfaceRegular\"\n        >\n          <a-input\n            v-model=\"form.interfaceRegular\"\n            @blur=\"\n              () => {\n                $refs.interfaceRegular.onFieldBlur();\n              }\n            \"\n          />\n        </a-form-model-item>\n\n        <a-form-model-item label=\"所属业务\" prop=\"belongBusiness\">\n          <a-select\n            v-model=\"form.belongBusiness\"\n            placeholder=\"请选择接口所属业务线\"\n          >\n            <a-select-option value=\"Content\">\n              内容&会员\n            </a-select-option>\n            <a-select-option value=\"Other\">\n              其他\n            </a-select-option>\n          </a-select>\n        </a-form-model-item>\n\n        <a-form-model-item label=\"接口描述\" prop=\"interfaceDesc\">\n          <a-input\n            v-model=\"form.interfaceDesc\"\n            type=\"textarea\"\n            placeholder=\"请输入对接口的描述，如所属功能块\"\n          />\n        </a-form-model-item>\n      </a-form-model>\n      <div>\n        <a-tabs default-active-key=\"1\">\n          <a-tab-pane key=\"1\" tab=\"请求Header\">\n            <json-viewer\n              :value=\"nowColumns.requestHeader\"\n              copyable\n              boxed\n              sort\n            ></json-viewer>\n          </a-tab-pane>\n          <a-tab-pane key=\"2\" tab=\"请求Data\">\n            <json-viewer\n              :value=\"nowColumns.requestData\"\n              copyable\n              boxed\n              sort\n            ></json-viewer>\n          </a-tab-pane>\n          <a-tab-pane key=\"3\" tab=\"返回Header\" force-render>\n            <json-viewer\n              :value=\"nowColumns.responseHeader\"\n              copyable\n              boxed\n              sort\n            ></json-viewer>\n          </a-tab-pane>\n          <a-tab-pane key=\"4\" tab=\"返回Response\">\n            <json-viewer\n              :value=\"nowColumns.responseData\"\n              copyable\n              boxed\n              sort\n            ></json-viewer>\n          </a-tab-pane>\n        </a-tabs>\n      </div>\n    </a-modal>\n  </div>\n</template>\n<script>\nimport request from \"@/utils/request\";\nimport { message } from \"ant-design-vue\";\n\n// 核心接口上传modal\nexport default {\n  data() {\n    /**\n     * sonVisible: 弹窗是否可见\n     * labelCol，wrapperCol: 每一个Item所占长度比例分布\n     * form: 表单数据\n     * rules: 表单校验规则\n     */\n    return {\n      sonVisible: false,\n      labelCol: { span: 4 },\n      wrapperCol: { span: 14 },\n      form: {\n        interfacePath: \"\",\n        interfaceRegular: \"\",\n        belongBusiness: undefined,\n        interfaceDesc: \"\"\n      },\n      rules: {\n        interfacePath: [\n          { required: true, message: \"请输入接口路径\", trigger: \"blur\" },\n          {\n            min: 10,\n            max: 200,\n            message: \"接口路径限制在10～200个字符\",\n            trigger: \"blur\"\n          }\n        ],\n        interfaceRegular: [\n          { required: true, message: \"请输入接口匹配正则\", trigger: \"blur\" },\n          {\n            min: 10,\n            max: 200,\n            message: \"接口匹配正则限制在5～100个字符\",\n            trigger: \"blur\"\n          }\n        ],\n        belongBusiness: [\n          { required: true, message: \"请选择接口所属业务线\", trigger: \"change\" }\n        ],\n        interfaceDesc: [\n          { required: true, message: \"请输入接口描述信息\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  props: [\"visible\", \"nowColumns\"],\n  // 这里要使用一个监听属性，检测父属性visible的变化\n  watch: {\n    visible() {\n      this.sonVisible = this.visible;\n    },\n    nowColumns() {\n      this.form.interfacePath = this.nowColumns.interfacePath;\n    }\n  },\n  methods: {\n    /**\n     * handleUpload: 上传接口\n     * handleCancel: 点击取消请求接口\n     * resetForm: 重置form表单数据\n     */\n    handleUpload(e) {\n      console.log(e);\n      this.$refs.ruleForm.validate(valid => {\n        if (valid) {\n          const values = {\n            ...this.nowColumns,\n            ...this.form\n          };\n          request({\n            url: \"/api/tempinter/uploadcoreinter\",\n            method: \"POST\",\n            data: values\n          }).then(res => {\n            if (res.data.code === 200000) {\n              message.success(res.data.msg);\n            } else if (res.data.code === 200002) {\n              message.error(res.data.msg);\n            } else {\n              message.error(\"未知错误，服务端发生异常\");\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n      this.$emit(\"changeUploadPop\", false);\n    },\n    handleCancel(e) {\n      console.log(e);\n      this.$emit(\"changeUploadPop\", false);\n    },\n\n    resetForm() {\n      this.$refs.ruleForm.resetFields();\n    }\n  }\n};\n</script>\n"]}]}