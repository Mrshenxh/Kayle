{"remainingRequest":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shenxh/Desktop/qa_auto_test/src/components/modulelist/createmitm.vue?vue&type=style&index=0&id=774eff56&scoped=true&lang=css&","dependencies":[{"path":"/Users/shenxh/Desktop/qa_auto_test/src/components/modulelist/createmitm.vue","mtime":1605432526419},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBtZWRpYSAobWluLXdpZHRoOiA5MDBweCl7CiAgLmhvc3Qtc2VsZWN0IHsKICAgIHdpZHRoOiBjYWxjKDYwJSk7CiAgfQogIC5sYWJlbC1zZWxlY3QgewogICAgbWFyZ2luLWxlZnQ6IGNhbGMoMTAlKTsKfQp9CgpAbWVkaWEgKG1heC13aWR0aDogOTAwcHgpIHsKICAuaG9zdC1zZWxlY3QgewogICAgd2lkdGg6IGNhbGMoNzAlKTsKICB9Cn0KCi50b3RhbC1yb3VhZCB7CiAgICBkaXNwbGF5OmlubGluZTsKfQoKLmV4YW1wbGUgewogIHRleHQtYWxpZ246IGNlbnRlcjsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDUpOwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIHBhZGRpbmc6IDMwcHggNTBweDsKICBtYXJnaW46IDIwcHggMDsKfQoK"},{"version":3,"sources":["createmitm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"createmitm.vue","sourceRoot":"src/components/modulelist","sourcesContent":["<template>\n<a-spin :spinning=\"showSpin\">\n<div class=\"total-rouad\">\n      <a-form v-bind=\"formItemLayout\" :form=\"form\" @submit=\"handleSubmit\" style=\"width:calc(60%);float:left;\">\n          <a-form-item class=\"label-select\">\n              <H4>创建mitmproxy代理</H4>\n          </a-form-item>\n      <a-form-item label=\"代理Port\" class=\"host-select\">\n          <a-input placeholder=\"输入创建代理端口号，如8808\" allow-clear @change=\"onChange\"  v-decorator=\"[\n          'input-port',\n          {\n            rules: [\n              { required: true, message: '请输入要创建mitmproxy的端口号', type: 'string' },\n            ],\n          },\n        ]\" />\n      </a-form-item>\n\n      <a-form-item label=\"筛选host\" class=\"host-select\">\n    <a-select\n        v-decorator=\"[\n          'select-multiple',\n          {\n            rules: [\n              { required: true, message: 'Please select your favourite colors!', type: 'array' },\n            ],\n          },\n        ]\"\n        mode=\"multiple\"\n        placeholder=\"请选择要筛选的host\"\n      >\n        <a-select-option value=\"api.zhihu.com\">\n          api.zhihu.com\n        </a-select-option>\n        <a-select-option value=\"green\">\n          Green\n        </a-select-option>\n        <a-select-option value=\"blue\">\n          Blue\n        </a-select-option>\n      </a-select>\n    </a-form-item>\n    <a-form-item label=\"代理时间\" class=\"host-select\">\n      <a-date-picker\n        v-decorator=\"['date-time-picker', config]\"\n        show-time\n        format=\"YYYY-MM-DD HH:mm:ss\"\n        />\n    </a-form-item>\n    <a-form-item\n      :wrapper-col=\"{\n        xs: { span: 24, offset: 0 },\n        sm: { span: 16, offset: 8 },\n      }\"\n      class=\"host-select\"\n    >\n      <a-button type=\"primary\" html-type=\"submit\">\n        创建\n      </a-button>\n    </a-form-item>\n  </a-form>\n    <div style=\"width:calc(40%);float:left;\">\n        <a-card title=\"创建说明\" style=\"width: 300px\">\n            <a slot=\"extra\" href=\"#\">更多</a>\n            <p>1、使用mitmproxy需要先创建一个属于自己的端口号来监听流量</p>\n            <p>2、目前支持筛选指定host的流量，如api.zhihu.com</p>\n            <p>3、使用代理结束后，可以主动销毁mitmproxy，系统也会根据有效时间定时销毁</p>\n        </a-card>\n    </div>\n</div>\n</a-spin>\n</template>\n<script>\n\nimport {message} from \"ant-design-vue\";\nimport request from '@/utils/request';\n\nexport default {\n  data() {\n    return {\n      formItemLayout: {\n        labelCol: {\n          xs: { span: 24 },\n          sm: { span: 8 },\n        },\n        wrapperCol: {\n          xs: { span: 24 },\n          sm: { span: 16 },\n        },\n      },\n      config: {\n        rules: [{ type: 'object', required: true, message: '请选择一个代理有效时间' }],\n      },\n      showSpin: false,\n    };\n  },\n  beforeCreate() {\n    this.form = this.$form.createForm(this, { name: 'time_related_controls' });\n  },\n  methods: {\n    handleSubmit(e) {\n      e.preventDefault();\n      this.form.validateFields((err, fieldsValue) => {\n        if (err) {\n          return;\n        }\n        this.showSpin = true;\n        const values = {\n          ...fieldsValue,\n          'host_list': fieldsValue['select-multiple'].toString(),\n          'port': fieldsValue['input-port'],\n          'expire_time': fieldsValue['date-time-picker'].format('YYYY-MM-DD HH:mm:ss'),\n        };\n        console.log(fieldsValue['date-time-picker']);\n        console.log('Received values of form: ', values);\n        request({\n            url: \"/api/tempinter/createmitm\",\n            method: \"POST\",\n            data: values,\n        }).then(res => {\n            if (res.data.code === 210002) {\n                message.success(res.data.msg);\n            }else if (res.data.code === 210003){\n                message.warning(res.data.msg);\n            }else {\n                message.error(\"未知错误，服务端发生异常\");\n            }\n            this.$store.dispatch({type:'getUserMitmproxy'}).then(()=>{\n                console.log(\"走这里么\");\n                this.showSpin = false;\n                this.$emit('create-event', res.data.data);\n            })\n        })\n      });\n    },\n    onChange(e) {\n        console.log(\"走的这里？？？\")\n        console.log(e);\n    },\n  },\n};\n</script>\n\n<style scoped>\n\n@media (min-width: 900px){\n  .host-select {\n    width: calc(60%);\n  }\n  .label-select {\n    margin-left: calc(10%);\n}\n}\n\n@media (max-width: 900px) {\n  .host-select {\n    width: calc(70%);\n  }\n}\n\n.total-rouad {\n    display:inline;\n}\n\n.example {\n  text-align: center;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding: 30px 50px;\n  margin: 20px 0;\n}\n\n</style>"]}]}