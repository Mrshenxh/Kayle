{"remainingRequest":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shenxh/Desktop/qa_auto_test/src/views/interface/transcribe.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shenxh/Desktop/qa_auto_test/src/views/interface/transcribe.vue","mtime":1606272986190},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shenxh/Desktop/qa_auto_test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCc7CmltcG9ydCBjcmVhdGVtaXRtIGZyb20gJ0AvY29tcG9uZW50cy9tb2R1bGVsaXN0L2NyZWF0ZW1pdG0nOwppbXBvcnQge21lc3NhZ2V9IGZyb20gImFudC1kZXNpZ24tdnVlIjsKCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZURyYWdnYWJsZVJlc2l6YWJsZSBmcm9tICd2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSc7CgpWdWUuY29tcG9uZW50KCd2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZScsIFZ1ZURyYWdnYWJsZVJlc2l6YWJsZSk7Cgpjb25zdCBkcmFnZ2luZ01hcCA9IHt9Owpjb2x1bW5zLmZvckVhY2goY29sID0+IHsKICBkcmFnZ2luZ01hcFtjb2wua2V5XSA9IGNvbC53aWR0aDsKfSk7CmNvbnN0IGRyYWdnaW5nU3RhdGUgPSBWdWUub2JzZXJ2YWJsZShkcmFnZ2luZ01hcCk7CmNvbnN0IFJlc2l6ZWFibGVUaXRsZSA9IChoLCBwcm9wcywgY2hpbGRyZW4pID0+IHsKICBsZXQgdGhEb20gPSBudWxsOwogIGNvbnN0IHsga2V5LCAuLi5yZXN0UHJvcHMgfSA9IHByb3BzOwogIGNvbnN0IGNvbCA9IGNvbHVtbnMuZmluZChjb2wgPT4gewogICAgY29uc3QgayA9IGNvbC5kYXRhSW5kZXggfHwgY29sLmtleTsKICAgIHJldHVybiBrID09PSBrZXk7CiAgfSk7CiAgaWYgKCFjb2wud2lkdGgpIHsKICAgIHJldHVybiA8dGggey4uLnJlc3RQcm9wc30+e2NoaWxkcmVufTwvdGg+OwogIH0KICBjb25zdCBvbkRyYWcgPSB4ID0+IHsKICAgIGRyYWdnaW5nU3RhdGVba2V5XSA9IDA7CiAgICBjb2wud2lkdGggPSBNYXRoLm1heCh4LCAxKTsKICB9OwoKICBjb25zdCBvbkRyYWdzdG9wID0gKCkgPT4gewogICAgZHJhZ2dpbmdTdGF0ZVtrZXldID0gdGhEb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7CiAgfTsKICByZXR1cm4gKAogICAgPHRoIHsuLi5yZXN0UHJvcHN9IHYtYW50LXJlZj17ciA9PiAodGhEb20gPSByKX0gd2lkdGg9e2NvbC53aWR0aH0gY2xhc3M9InJlc2l6ZS10YWJsZS10aCI+CiAgICAgIHtjaGlsZHJlbn0KICAgICAgPHZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlCiAgICAgICAga2V5PXtjb2wua2V5fQogICAgICAgIGNsYXNzPSJ0YWJsZS1kcmFnZ2FibGUtaGFuZGxlIgogICAgICAgIHc9ezEwfQogICAgICAgIHg9e2RyYWdnaW5nU3RhdGVba2V5XSB8fCBjb2wud2lkdGh9CiAgICAgICAgej17MX0KICAgICAgICBheGlzPSJ4IgogICAgICAgIGRyYWdnYWJsZT17dHJ1ZX0KICAgICAgICByZXNpemFibGU9e2ZhbHNlfQogICAgICAgIG9uRHJhZ2dpbmc9e29uRHJhZ30KICAgICAgICBvbkRyYWdzdG9wPXtvbkRyYWdzdG9wfQogICAgICA+PC92dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZT4KICAgIDwvdGg+CiAgKTsKfTsKCgoKY29uc3QgY29sdW1ucyA9IFsKICB7IHRpdGxlOiAn5o6l5Y+jcGF0aCcsIHdpZHRoOiAxMDAsIGRhdGFJbmRleDogJ25hbWUnLCBrZXk6ICduYW1lJywgZml4ZWQ6ICdsZWZ0JyB9LAogIHsgdGl0bGU6ICfor7fmsYLmlrnlvI8nLCB3aWR0aDogMTAwLCBkYXRhSW5kZXg6ICdhZ2UnLCBrZXk6ICdhZ2UnLCBmaXhlZDogJ2xlZnQnIH0sCiAgeyB0aXRsZTogJ+ivt+axguaVsOaNricsIGRhdGFJbmRleDogJ2FkZHJlc3MnLCBrZXk6ICcxJywgd2lkdGg6IDE1MCB9LAogIHsgdGl0bGU6ICfor7fmsYJIZWFkZXInLCBkYXRhSW5kZXg6ICdhZGRyZXNzJywga2V5OiAnMicsIHdpZHRoOiAxNTAgfSwKICB7IHRpdGxlOiAn6K+35rGC6ICX5pe2JywgZGF0YUluZGV4OiAnYWRkcmVzcycsIGtleTogJzMnLCB3aWR0aDogMTUwIH0sCiAgeyB0aXRsZTogJ+i/lOWbnlN0YXR1cycsIGRhdGFJbmRleDogJ2FkZHJlc3MnLCBrZXk6ICc0Jywgd2lkdGg6IDE1MCB9LAogIHsgdGl0bGU6ICfov5Tlm55IZWFkZXInLCBkYXRhSW5kZXg6ICdhZGRyZXNzJywga2V5OiAnNScsIHdpZHRoOiAxNTAgfSwKICB7IHRpdGxlOiAn6L+U5ZueRGF0YScsIGRhdGFJbmRleDogJ2FkZHJlc3MnLCBrZXk6ICc2Jywgd2lkdGg6IDE1MCB9LAogIHsgdGl0bGU6ICfor7fmsYJTaXplJywgZGF0YUluZGV4OiAnYWRkcmVzcycsIGtleTogJzcnLCB3aWR0aDogMTUwIH0sCiAgeyB0aXRsZTogJ+i/lOWbnlNpemUnLCBkYXRhSW5kZXg6ICdhZGRyZXNzJywga2V5OiAnOCcgfSwKICB7CiAgICB0aXRsZTogJ0FjdGlvbicsCiAgICBrZXk6ICdvcGVyYXRpb24nLAogICAgZml4ZWQ6ICdyaWdodCcsCiAgICB3aWR0aDogMTAwLAogICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiBbJ2FjdGlvbiddLH0sCiAgfSwKXTsKCmNvbnN0IGRhdGEgPSBbXTsKZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykgewogIGRhdGEucHVzaCh7CiAgICBrZXk6IGksCiAgICBuYW1lOiBgRWRyd2FyZCAke2l9YCwKICAgIGFnZTogMzIsCiAgICBhZGRyZXNzOiBgTG9uZG9uIFBhcmsgbm8uICR7aX1gLAogIH0pOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHRoaXMuY29tcG9uZW50cyA9IHsKICAgICAgaGVhZGVyOiB7CiAgICAgICAgY2VsbDogUmVzaXplYWJsZVRpdGxlLAogICAgICB9LAogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGRhdGEsCiAgICAgIGNvbHVtbnMsCiAgICAgIGV4cGFuZDogZmFsc2UsCiAgICAgIGZvcm06IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzLCB7IG5hbWU6ICdhZHZhbmNlZF9zZWFyY2gnIH0pLAogICAgICBwYXRoOiAid3M6Ly8xMjcuMC4wLjE6MzMzMy90ZW1waW50ZXIvdGVtcHNvY2tldC9mbG93LzEwMDAwMDAwIiwKICAgICAgc29ja2V0OiIiLAogICAgICBoYXNfbWl0bXByb3h5OiBmYWxzZSwKICAgICAgY3JlYXRlU2hvdzogdHJ1ZSwKICAgICAgbWl0bV9tZXNzYWdlOnt9LAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGNyZWF0ZW1pdG0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb3VudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZXhwYW5kID8gMTEgOiA3OwogICAgfSwKICB9LAogIHVwZGF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZygndXBkYXRlZCcpOwogIH0sCiAgZGVzdHJveWVkICgpIHsKICAgIGlmICh0aGlzLnNvY2tldCAhPT0gIiIpIHsKICAgICAgLy8g6ZSA5q+B55uR5ZCsCiAgICAgIHRoaXMuc29ja2V0Lm9uY2xvc2UgPSB0aGlzLmNsb3NlIAogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIOWcqOWIm+W7uuaXtuWAmeWwseivt+axguafpeivouaYr+WQpuacieWvueW6lOeahHBvcnQKICAgIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLm1pdG1wcm94eSk7CiAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgibWl0bXByb3h5IikgJiYgdGhpcy4kc3RvcmUuc3RhdGUubWl0bXByb3h5ICE9PSB1bmRlZmluZWQgJiYgJ3BvcnQnIGluIHRoaXMuJHN0b3JlLnN0YXRlLm1pdG1wcm94eSAmJiB0aGlzLiRzdG9yZS5zdGF0ZS5taXRtcHJveHkucG9ydCAhPT0gJycpIHsKICAgICAgdGhpcy5jcmVhdGVTaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuaGFzX21pdG1wcm94eSA9IHRydWU7CiAgICAgIHRoaXMuaW5pdCgpOyAKICAgIH1lbHNlIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goe3R5cGU6J2dldFVzZXJNaXRtcHJveHknfSkudGhlbigocmVzKT0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIGlmIChyZXMgPT09IDIzMDAwMCkgewogICAgICAgICAgdGhpcy5jcmVhdGVTaG93ID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuaGFzX21pdG1wcm94eSA9IGZhbHNlOwogICAgICAgIH1lbHNlIGlmIChyZXMgPT09IDIzMDAwMikgewogICAgICAgICAgdGhpcy5jcmVhdGVTaG93ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmhhc19taXRtcHJveHkgPSB0cnVlOwogICAgICAgICAgdGhpcy5pbml0KCk7CiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU2VhcmNoKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLmZvcm0udmFsaWRhdGVGaWVsZHMoKGVycm9yLCB2YWx1ZXMpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCBlcnJvcik7CiAgICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIHZhbHVlcyBvZiBmb3JtOiAnLCB2YWx1ZXMpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVSZXNldCgpIHsKICAgICAgdGhpcy5mb3JtLnJlc2V0RmllbGRzKCk7CiAgICB9LAogICAgLy8g5pCc57Si6YCJ6aG55oqY5Y+gCiAgICB0b2dnbGUoKSB7CiAgICAgIHRoaXMuZXhwYW5kID0gIXRoaXMuZXhwYW5kOwogICAgfSwKICAgIGdldENyZWF0ZURhdGEoZGF0YSkgewogICAgICAvLyDov5nkuKrml7blgJnnu4Tku7blt7Lnu4/liJvlu7rmiJDlip8KICAgICAgdGhpcy5taXRtX21lc3NhZ2UgPSBkYXRhOwogICAgICBjb25zb2xlLmxvZygn6LWw5Yiw5Zue6LCD5pa55rOV5ZWmJyk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLm1pdG1wcm94eS5wb3J0KQogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUubWl0bXByb3h5LnBvcnQgIT09ICcnICYmIHRoaXMuJHN0b3JlLnN0YXRlLm1pdG1wcm94eS5taXRtX2lkICE9PSAnJykgewogICAgICAgIGNvbnNvbGUubG9nKCfov5vlhaXliKTmlq0nKTsKICAgICAgICBpZiAodGhpcy5zb2NrZXQgPT09ICIiKSB7CiAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5jcmVhdGVTaG93ID0gZmFsc2U7CiAgICAgICAgdGhpcy5oYXNfbWl0bXByb3h5ID0gdHJ1ZTsgCiAgICAgIH0KICAgIH0sCgogICAgaW5pdDogZnVuY3Rpb24gKCkgewogICAgICBpZih0eXBlb2YoV2ViU29ja2V0KSA9PT0gInVuZGVmaW5lZCIpewogICAgICAgIGFsZXJ0KCLmgqjnmoTmtY/op4jlmajkuI3mlK/mjIFzb2NrZXQiKQogICAgICB9ZWxzZXsKICAgICAgICAvLyDlrp7kvovljJZzb2NrZXQKICAgICAgICB0aGlzLnNvY2tldCA9IG5ldyBXZWJTb2NrZXQodGhpcy5wYXRoKQogICAgICAgIC8vIOebkeWQrHNvY2tldOi/nuaOpQogICAgICAgIHRoaXMuc29ja2V0Lm9ub3BlbiA9IHRoaXMub3BlbgogICAgICAgIC8vIOebkeWQrHNvY2tldOmUmeivr+S/oeaBrwogICAgICAgIHRoaXMuc29ja2V0Lm9uZXJyb3IgPSB0aGlzLmVycm9yCiAgICAgICAgLy8g55uR5ZCsc29ja2V05raI5oGvCiAgICAgICAgdGhpcy5zb2NrZXQub25tZXNzYWdlID0gdGhpcy5nZXRNZXNzYWdlCiAgICAgIH0KICAgIH0sCiAgICBvcGVuOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coInNvY2tldOi/nuaOpeaIkOWKnyIpCiAgICB9LAogICAgZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc29sZS5sb2coIui/nuaOpemUmeivryIpCiAgICB9LAogICAgZ2V0TWVzc2FnZTogZnVuY3Rpb24gKG1zZykgewogICAgICAgIGNvbnNvbGUubG9nKG1zZy5kYXRhKQogICAgfSwKICAgIHNlbmQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLnNvY2tldC5zZW5kKCJoYWhhIikKICAgIH0sCiAgICBjbG9zZTogZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJzb2NrZXTlt7Lnu4/lhbPpl60iKQogICAgfSwKICAgIGNsb3NlbWl0bXByb3h5KCl7CiAgICAgIHJlcXVlc3QoewogICAgICAgIHVybDogIi9hcGkvdGVtcGludGVyL3N0b3BtaXRtIiwKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMjAwMDApIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKHt0eXBlOidkZWxldGVVc2VyTWl0bXByb3h5J30pOwogICAgICAgICAgbWVzc2FnZS5zdWNjZXNzKCLlt7Lnu4/kuLrmgqjlhbPpl61taXRtcHJveHnku6PnkIYiKTsKICAgICAgICAgIHRoaXMuc29ja2V0Lm9uY2xvc2UgPSB0aGlzLmNsb3NlCiAgICAgICAgfWVsc2UgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIyMDAwMSkgewogICAgICAgICAgbWVzc2FnZS53YXJuaW5nKCLmn6Xor6LliLDkvaDov5novrnmsqHmnInlr7nlupTnmoRtaXRtcHJveHnku6PnkIYiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHRlc3QxKCl7CiAgICAgIGNvbnNvbGUubG9nKCJ0ZXN0MSIpOwogICAgfSwKICAgIHRlc3QyKCl7CiAgICAgIGNvbnNvbGUubG9nKCJ0ZXN0MiIpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["transcribe.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"transcribe.vue","sourceRoot":"src/views/interface","sourcesContent":["<template>\n<div v-cloak>\n  <createmitm v-show=\"createShow\" @create-event=\"getCreateData\"></createmitm>\n  <div id=\"components-form-demo-advanced-search\" v-show=\"has_mitmproxy\">\n    <a-form class=\"ant-advanced-search-form\" :form=\"form\" @submit=\"handleSearch\">\n      <a-row :gutter=\"24\">\n        <a-col :span=\"8\">\n          <a-form-item label=\"URL查询\">\n            <a-input placeholder=\"输入要查询URL信息\" v-decorator=\"[`urlcontent`,]\"></a-input>\n          </a-form-item>\n        </a-col>\n        <a-col :span=\"8\">\n          <a-form-item label=\"应用查询\">\n            <a-input placeholder=\"输入URL所属应用\" v-decorator=\"[`applyname`,]\"></a-input>\n          </a-form-item>\n        </a-col>\n        <a-col :span=\"8\">\n          <a-form-item label=\"请求方式\">\n            <a-select v-decorator=\"['select-method',]\"\n            mode=\"multiple\"\n            placeholder=\"筛选请求method\"\n            class=\"search-methdod-select\">\n              <a-select-option value=\"GET\">\n                GET\n              </a-select-option>\n              <a-select-option value=\"POST\">\n                POST\n              </a-select-option>\n            </a-select>\n          </a-form-item>\n        </a-col>\n      </a-row>\n      <a-row>\n        <a-col :span=\"24\" :style=\"{ textAlign: 'right' }\">\n          <a-button type=\"primary\" html-type=\"submit\">\n            搜索\n          </a-button>\n          <a-button :style=\"{ marginLeft: '8px' }\" @click=\"handleReset\">\n            清空\n          </a-button>\n          <!-- <a :style=\"{ marginLeft: '8px', fontSize: '12px' }\" @click=\"toggle\">\n            Collapse <a-icon :type=\"expand ? 'up' : 'down'\" />\n          </a> -->\n          <a-button type=\"primary\" @click=\"closemitmproxy\" :style=\"{ marginLeft: '8px', fontSize: '12px' }\">关闭mitmproxy</a-button>\n        </a-col>\n      </a-row>\n    </a-form>\n\n    <div class=\"search-result-list\">\n      <a-table :columns=\"columns\" :data-source=\"data\" :scroll=\"{ x: 1500, y: 300 }\" :components=\"components\">\n        <div slot=\"action\">\n          <a @click=\"test1\">action</a>\n          <a @click=\"test2\">  action1</a>\n        </div>\n  </a-table>\n    </div>\n  </div>\n\n</div>\n\n</template>\n\n<script>\nimport request from '@/utils/request';\nimport createmitm from '@/components/modulelist/createmitm';\nimport {message} from \"ant-design-vue\";\n\nimport Vue from 'vue';\nimport VueDraggableResizable from 'vue-draggable-resizable';\n\nVue.component('vue-draggable-resizable', VueDraggableResizable);\n\nconst draggingMap = {};\ncolumns.forEach(col => {\n  draggingMap[col.key] = col.width;\n});\nconst draggingState = Vue.observable(draggingMap);\nconst ResizeableTitle = (h, props, children) => {\n  let thDom = null;\n  const { key, ...restProps } = props;\n  const col = columns.find(col => {\n    const k = col.dataIndex || col.key;\n    return k === key;\n  });\n  if (!col.width) {\n    return <th {...restProps}>{children}</th>;\n  }\n  const onDrag = x => {\n    draggingState[key] = 0;\n    col.width = Math.max(x, 1);\n  };\n\n  const onDragstop = () => {\n    draggingState[key] = thDom.getBoundingClientRect().width;\n  };\n  return (\n    <th {...restProps} v-ant-ref={r => (thDom = r)} width={col.width} class=\"resize-table-th\">\n      {children}\n      <vue-draggable-resizable\n        key={col.key}\n        class=\"table-draggable-handle\"\n        w={10}\n        x={draggingState[key] || col.width}\n        z={1}\n        axis=\"x\"\n        draggable={true}\n        resizable={false}\n        onDragging={onDrag}\n        onDragstop={onDragstop}\n      ></vue-draggable-resizable>\n    </th>\n  );\n};\n\n\n\nconst columns = [\n  { title: '接口path', width: 100, dataIndex: 'name', key: 'name', fixed: 'left' },\n  { title: '请求方式', width: 100, dataIndex: 'age', key: 'age', fixed: 'left' },\n  { title: '请求数据', dataIndex: 'address', key: '1', width: 150 },\n  { title: '请求Header', dataIndex: 'address', key: '2', width: 150 },\n  { title: '请求耗时', dataIndex: 'address', key: '3', width: 150 },\n  { title: '返回Status', dataIndex: 'address', key: '4', width: 150 },\n  { title: '返回Header', dataIndex: 'address', key: '5', width: 150 },\n  { title: '返回Data', dataIndex: 'address', key: '6', width: 150 },\n  { title: '请求Size', dataIndex: 'address', key: '7', width: 150 },\n  { title: '返回Size', dataIndex: 'address', key: '8' },\n  {\n    title: 'Action',\n    key: 'operation',\n    fixed: 'right',\n    width: 100,\n    scopedSlots: { customRender: ['action'],},\n  },\n];\n\nconst data = [];\nfor (let i = 0; i < 100; i++) {\n  data.push({\n    key: i,\n    name: `Edrward ${i}`,\n    age: 32,\n    address: `London Park no. ${i}`,\n  });\n}\n\nexport default {\n  data() {\n    this.components = {\n      header: {\n        cell: ResizeableTitle,\n      },\n    };\n    return {\n      data,\n      columns,\n      expand: false,\n      form: this.$form.createForm(this, { name: 'advanced_search' }),\n      path: \"ws://127.0.0.1:3333/tempinter/tempsocket/flow/10000000\",\n      socket:\"\",\n      has_mitmproxy: false,\n      createShow: true,\n      mitm_message:{},\n    };\n  },\n  components: {\n    createmitm\n  },\n  computed: {\n    count() {\n      return this.expand ? 11 : 7;\n    },\n  },\n  updated() {\n    console.log('updated');\n  },\n  destroyed () {\n    if (this.socket !== \"\") {\n      // 销毁监听\n      this.socket.onclose = this.close \n    }\n  },\n  created() {\n    // 在创建时候就请求查询是否有对应的port\n    console.log(this.$store.state.mitmproxy);\n    if (sessionStorage.getItem(\"mitmproxy\") && this.$store.state.mitmproxy !== undefined && 'port' in this.$store.state.mitmproxy && this.$store.state.mitmproxy.port !== '') {\n      this.createShow = false;\n      this.has_mitmproxy = true;\n      this.init(); \n    }else {\n      this.$store.dispatch({type:'getUserMitmproxy'}).then((res)=> {\n        console.log(res);\n        if (res === 230000) {\n          this.createShow = true;\n          this.has_mitmproxy = false;\n        }else if (res === 230002) {\n          this.createShow = false;\n          this.has_mitmproxy = true;\n          this.init();\n        }\n      })\n    }\n  },\n  methods: {\n    handleSearch(e) {\n      e.preventDefault();\n      this.form.validateFields((error, values) => {\n        console.log('error', error);\n        console.log('Received values of form: ', values);\n      });\n    },\n    handleReset() {\n      this.form.resetFields();\n    },\n    // 搜索选项折叠\n    toggle() {\n      this.expand = !this.expand;\n    },\n    getCreateData(data) {\n      // 这个时候组件已经创建成功\n      this.mitm_message = data;\n      console.log('走到回调方法啦');\n      console.log(this.$store.state.mitmproxy.port)\n      if (this.$store.state.mitmproxy.port !== '' && this.$store.state.mitmproxy.mitm_id !== '') {\n        console.log('进入判断');\n        if (this.socket === \"\") {\n          this.init();\n        }\n        this.createShow = false;\n        this.has_mitmproxy = true; \n      }\n    },\n\n    init: function () {\n      if(typeof(WebSocket) === \"undefined\"){\n        alert(\"您的浏览器不支持socket\")\n      }else{\n        // 实例化socket\n        this.socket = new WebSocket(this.path)\n        // 监听socket连接\n        this.socket.onopen = this.open\n        // 监听socket错误信息\n        this.socket.onerror = this.error\n        // 监听socket消息\n        this.socket.onmessage = this.getMessage\n      }\n    },\n    open: function () {\n        console.log(\"socket连接成功\")\n    },\n    error: function () {\n      console.log(\"连接错误\")\n    },\n    getMessage: function (msg) {\n        console.log(msg.data)\n    },\n    send: function () {\n        this.socket.send(\"haha\")\n    },\n    close: function () {\n        console.log(\"socket已经关闭\")\n    },\n    closemitmproxy(){\n      request({\n        url: \"/api/tempinter/stopmitm\",\n        method: \"POST\",\n      }).then(res => {\n        if (res.data.code === 220000) {\n          this.$store.dispatch({type:'deleteUserMitmproxy'});\n          message.success(\"已经为您关闭mitmproxy代理\");\n          this.socket.onclose = this.close\n        }else if (res.data.code === 220001) {\n          message.warning(\"查询到你这边没有对应的mitmproxy代理\");\n        }\n      });\n    },\n    test1(){\n      console.log(\"test1\");\n    },\n    test2(){\n      console.log(\"test2\");\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n\n[v-cloak]\n{  \ndisplay: none; \n}\n\n\n.ant-advanced-search-form {\n  padding: 24px;\n  background: #fbfbfb;\n  border: 1px solid #d9d9d9;\n  border-radius: 6px;\n}\n\n.ant-advanced-search-form .ant-form-item {\n  display: flex;\n}\n\n.ant-advanced-search-form .ant-form-item-control-wrapper {\n  flex: 1;\n}\n\n#components-form-demo-advanced-search .ant-form {\n  max-width: none;\n}\n#components-form-demo-advanced-search {\n  margin-top: 16px;\n  border: 1px dashed #e9e9e9;\n  border-radius: 6px;\n  background-color: #fafafa;\n  min-height: 200px;\n  text-align: center;\n  /* padding-top: 10px; */\n}\n\n.search-result-list {\n  margin-top: 16px;\n  border: 1px dashed #e9e9e9;\n  border-radius: 6px;\n  background-color: #fafafa;\n  min-height: 200px;\n  text-align: center;\n  padding-top: 20px;\n}\n\n@media (min-width: 900px){\n  .search-methdod-select {\n    width: 150px;\n  }\n}\n\n@media (max-width: 900px) {\n  .search-methdod-select {\n    width: 100px;\n  }\n}\n\n.resize-table-th {\n  position: relative;\n  .table-draggable-handle {\n    height: 100% !important;\n    bottom: 0;\n    left: auto !important;\n    right: -5px;\n    cursor: col-resize;\n    touch-action: none;\n  }\n}\n\n\n</style>"]}]}